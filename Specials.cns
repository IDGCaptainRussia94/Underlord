;---------------------------------------------------------------------------
; Teleport
[Statedef 1000]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1000
velset = 0,0

[State 1240, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 5,10;

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10000
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  0
xangle = 0
yangle = 0

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 8    ;fv = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 5 && numhelper(100000)>0
v = 8    ;fv = 10
value = helper(100000),var(8)

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 5 && numhelper(100000)>0 && helper(100000),var(8)<-980
v = 8    ;fv = 10
value = enemy,pos y

[State 0, VarSet]
type = VarSet
trigger1 = AnimElem = 5 && numhelper(100000)<1
v = 8    ;fv = 10
value = ifelse(command = "holddown",enemy,pos y,ifelse(command = "holdup" && var(9) < 30,128,0))

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10000
pos = p2bodydist X+64,((enemy,pos Y-pos Y)-32)-var(8)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = add
angle =  0
xangle = 0
yangle = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 5
anim = 10001
pos = 0,(-32)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = add
angle =  0
xangle = 0
yangle = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = numHelper(2102)+numHelper(2100) > 0
value = 0
movecamera = 0,0
;ignorehitpause = 
;persistent = 

[State 0, PosSet]
type = PosAdd
trigger1 = AnimElem = 5
x = p2bodydist X+64
y = (enemy,pos Y-pos Y)-var(8)
;ignorehitpause = 
;persistent = 

[State 0, PosSet]
type = PosSet
trigger1 = pos y = 0
y = 0

[State 0, Turn]
type = Turn
trigger1 = AnimElem = 5
;trigger1 = p2dist X < 0

[State 800, 2]
type = ChangeState
trigger1 = AnimElem = 5 && var(9) >= 30
value = var(9)
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimElem = 5
value = ifelse(pos y > -2,0,50)
ctrl = 1

;---------------------------------------------------------------------------
; Slam Force Kick
[Statedef 1001]
;type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 30                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 650

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S5,21

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 2
value = S5,5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 8
value = S2,4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 8
value = S2,3

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.99
y = 0.98

[State 0, VelMul]
type = VelMul
trigger1 = time>10 && time<25
x = 0.82
y = 0.72

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 8
time = 8
freq = 60
ampl = -4
phase = 90

[State 0, VelSet]
type = VelSet
trigger1 = time=6
x = 8
y = ifelse(statetype = A,-2,-6)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time=6
statetype = A       ;S,A,C,L

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 4 && enemy,stateno != [5600,5700]
attr = A, SA
animtype  = Hard
damage    = 72,2
hitflag = MAFD
guardflag = MA
pausetime = 26,12
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,5
guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -16
air.velocity = -16,0
givepower = 5
getpower = 20
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
p2facing = 1
p2stateno = 5606

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget>0
trigger1 = target,pos Y>-4 && movehit
time = 1
id = -1
pos = 24,0
ignorehitpause = 1
persistent = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit
time = 8
freq = 60
ampl = -8
phase = 90
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 7001
pos = 50,-42
postype = p1  ;p2,front,back,left,right
scale = 0.85,0.85
sprpriority = 40
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 7001
pos = 50,-42
vel = 6,0
postype = p1  ;p2,front,back,left,right
scale = 0.85,0.85
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 600, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 7, 138

[State 1240, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,1;

[State 0, VarSet]
type = VarSet
trigger1 = movehit
v = 10    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0
trigger1 = MoveHit && var(10)>0
v = 9    ;fv = 10
value = 620

[State 0, Null]
type = Null
triggerall = numhelper(100000)>0
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),cond(1,var(8) := 128,0)

[State 0, Null]
type = Null
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),cond(1,var(8) := -999,0)

[State 0, Explod]
type = Explod
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
anim = 6100
ID = 70000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 150

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
v = 9    ;fv = 10
value = 900

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),var(5)>300 && random<500
v = 9    ;fv = 10
value = 2050

[State 0, Explod]
type = Explod
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),var(52)>1500
anim = 6100
ID = 70000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 450

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0
triggerall = !ishelper
trigger1 = NumExplod(100100)>2
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),var(52)>1500
v = 9    ;fv = 10
value = 3050

[State 40, 6]
type = ChangeState
triggerall = numhelper(100000)>0
trigger1 = NumExplod(100100)<2
trigger1 = MoveHit && random<500 && p2bodydist y <30
value = 1040
ctrl = 0

[State 40, 6]
type = ChangeState
triggerall = numhelper(100000)>0
trigger1 = MoveHit && var(10)>0
value = 1000
ctrl = 0

[State 0, Explod]
type = Explod
trigger1 = numhelper(100000)>0
trigger1 = time = 0
anim = 6100
ID = 100100
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 200+random%200

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Explosive Grapple - Attempt
[Statedef 1019]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1702
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=3
value = S7,213
channel = -1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 8
y = 0
persistent=0

[State 800, 1]
type = HitDef
Trigger1 = Time = 0 && enemy,stateno != 1022
attr = S, ST          ;Attributes: Standing, Normal Throw
hitflag = MAF          ;Affect only ground people who are not being hit
guardflag = U
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1      
sparkxy = -5, -73
sprpriority = 1       ;Draw in front of p2
;p1facing = ifelse (command = "holdfwd", -1, 1) ;Turn if holding forwards
p2facing = 1          ;Force p2 to face KFM
p1stateno = 1020      
p2stateno = 1021       
fall = 1              ;Force p2 into falling down
fall.recover = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time>10
value = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Explosive Grapple
[Statedef 1020]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 100
ctrl = 0
anim = 1700
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,8

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 7003
pos = 32,-50
postype = p1  ;p2,front,back,left,right
scale = 0.65,0.65
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 24,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 1
id = -1
pos = 32,-36

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && animelem = 3 && numhelper(100000)<1
trigger2 = var(9)=1 && animelem = 3 && numhelper(100000)>0
value = 1030
ctrl = 0


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3 && time<29
time = 1
id = -1
pos = 28,-64

[State 0, EnvShake]
type = EnvShake
trigger1 = NumTarget && AnimElem = 4
time = 15
freq = 60
ampl = -8
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = NumTarget && AnimElem = 4
value = S7,132

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = NumTarget && AnimElem = 4 
value = -80
ID = -1
kill = 1

[State 0, TargetState]
type = TargetState
trigger1 = NumTarget && AnimElem = 4
value = 1022
ID = -1

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = NumTarget && AnimElem = 4
x = -2
y = -12
ID = -1
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time=14
anim = 10007
id = 10007
pos = 28,16
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 20
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = add

[State 0, Explod]
type = Explod
trigger1 = time=30 && ishelper
anim = 10023
id = 10023
pos = 28,16
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,2
sprpriority = 20
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>30
id = 10007
scale = 1.00,1.00+((time-30)/10.00)
trans = addalpha
alpha = 255-((time-30)*6),255


[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time=5 && random%200<50
value = S7,321
channel = -1

[State 0, VarSet]
type = VarSet
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0
v = 9    ;fv = 10
value = 1

[State 0, Explod]
type = Explod
trigger1 = NumHelper(100000)>0
trigger1 = ishelper
trigger1 = AnimTime = 0
anim = 6100
ID = 102005
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 180

[State 0, VarSet]
type = ParentVarSet
trigger1 = NumHelper(100000)>0
trigger1 = ishelper
trigger1 = AnimTime = 0
v = 9    ;fv = 10
value = 1

[State 0, VarSet]
type = null
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0
trigger1 = helper(100000),cond(1,var(49) := 43,0)

[State 0, VarSet]
type = null
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0 && ishelper
trigger1 = helper(100000),cond(1,var(49) := 1070,0)

[State 0, VarSet]
type = null
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0 && ishelper
trigger1 = helper(100000),cond(1,var(50) := 12,0)

[State 0, VarSet]
type = null
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0 && !ishelper
trigger1 = helper(100000),cond(1,var(50) := 10,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = NumHelper(100000)>0
trigger1 = AnimTime = 0
value = 22
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------
; P2-Thrown by explosive grapple
[Statedef 1021]
type = A
physics = N
movetype = H
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = 0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim2
trigger1 = time = 0
value = 1701

[State 830, 3]
type = NotHitBy
trigger1 = 1
value2 = SCA
time = 3

[State 0, SelfState]
type = SelfState
trigger1 = time>40 && p2stateno!=1030
value = 5030
;---------------------------
; P2-Thrown by explosive grapple
[Statedef 1022]
type = A
physics = N
movetype = H
ctrl = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = 0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim
trigger1 = time = 0 || vel y < 0
value = 5030
elem = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = 0.5

[State 0, SelfState]
type = ChangeState
trigger1 = pos y > 0
value = 5050

;---------------------------------------------------------------------------
;Explosive Grapple Twister Mode
[Statedef 1030]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 100
ctrl = 0
anim = 1700
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time<90
value = 1700
elem = 3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=120
value = 210
elem = 2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3 && time<90
time = 1
id = -1
pos = 28,-64

[State 0, EnvShake]
type = EnvShake
trigger1 = time>10 && time%5=0 && time<100
time = 1
freq = 60
ampl = -4
phase = 90

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time>10 && time%5=0 && time<100
value = -8
ID = -1
kill = 1
absolute = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time>10 && time%5=0 && time<100
value = 1,1+random%3

[State 0, Explod]
type = Explod
trigger1 = time>10 && time%5=0 && time<100
anim = 7001
pos = 24,target,pos Y
random = 32,64
vel = (500-random%1000)/200.00,0
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time=14
anim = 982
id = 1030
pos = 28,64
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 20
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
trans = add

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<50
id = 1030
scale = 1.00+time/120.00,time/15.00
trans = addalpha
alpha = (floor(time*(255.00/30.00))),255

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>100
id = 1030
scale = 1.00+time/120.00,time/15.00
trans = addalpha
alpha = 255-(floor((time-110)*(255.00/10.00))),255

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=10
value = S7,352
channel = -1

[State 0, TargetVelAdd]
type = TargetVelAdd
trigger1 = time=120
x = -8
y = -1
ID = -1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time=120
value = 1022
ID = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimTime = 0
id = 1030

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------
;Can't Stop Me!
[Statedef 1040]
type = A
movetype = A
physics = N
ctrl = 0
velset = 0, 0
anim = 726;739;940;7034
sprpriority = 5
Facep2 = 1

[State 3022, 1]
type = PlaySnd
trigger1 = Time = 10
value = 9,94;7,212;7, 107
volume = -50

[State 0, ]
type = NotHitBy
trigger1 = Time <= 13
value = SCA, NA, SA, HA, NP, SP, HP, AT
;value2 =
time = 1
;ignorehitpause = 0
;persistent = 1

[State 1383, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 836
trigger1 = Time >= 9
trigger1 = p2bodydist x <= 20
trigger1 = p2bodydist y <= 50
trigger1 = p2bodydist y >= -20
value = 836

[State 0, ]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
trigger1 = (Time%4) = 1
pos = -10,-40
anim = 712
id = 7088
postype = p1
vel = 0,0
bindtime = 1
removetime = 7
sprpriority = -5
supermovetime = 99999
scale = 0.75,0.75
ontop = 0
trans = sub
removeongethit = 1

[State 0, ]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
trigger1 = (Time%4) = 1
pos = -10,-40
anim = 712
id = 7088
postype = p1
Facing = -1
vel = 0,0
bindtime = 1
removetime = 7
sprpriority = -5
supermovetime = 99999
scale = 0.75,0.75
ontop = 0
trans = sub
removeongethit = 1

[State 0, ]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
trigger1 = (Time%4) = 1
pos = -10,-40
vfacing = -1
anim = 712
id = 7088
postype = p1
vel = 0,0
bindtime = 1
removetime = 7
sprpriority = -5
supermovetime = 99999
scale = 0.75,0.75
ontop = 0
trans = sub
removeongethit = 1

[State 0, ]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
trigger1 = (Time%4) = 1
pos = -10,-40
anim = 712
id = 7088
postype = p1
Facing = -1
vfacing = -1
vel = 0,0
bindtime = 1
removetime = 7
sprpriority = -5
supermovetime = 99999
scale = 0.75,0.75
ontop = 0
trans = sub
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 7,141

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 7
value = 7,344

[State 0, AfterImageTime]
type = AfterImageTime
trigger1 =  1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 5
value = 7,344

[State 0, ]
type = Explod
trigger1 = Time <12
anim = 7100
;ID =
pos = 0,-35
postype = p1
;facing = 1
;vfacing = 1
bindtime = 1
vel = -2,0
accel = -.01,-.02
;random = 0,0
supermove = 999
scale = .1, .3
trans = sub
angle = random%360
ontop = 1

[State 1383, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 9
value = 836

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time >= 60
;trigger1 = Time <= 80
trigger1 = (Time%25) = 1
value = 7,331

[State 1300, 1]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
;trigger2 = Time = 1075
trigger1 = (Time%15) = 1
anim = 881
postype = p1
facing = -1
pos = -28, -40
bindtime = -1
removetime = 55
ownpal = 1
sprpriority = 55
vel = -.3, 0
ontop = 0
removeongethit = 1
supermovetime = 9999
scale = .4,.4
trans = sub
id = 1409

[State 1300, 1]
type = Explod
trigger1 = Time >= 0
trigger1 = Time <= 8
;trigger2 = Time = 1075
trigger1 = (Time%8) = 1
anim = 882
postype = p1
facing = -1
pos = -28, -40
bindtime = -1
removetime = 55
ownpal = 1
sprpriority = 55
vel = -.3, 0
ontop = 0
removeongethit = 1
supermovetime = 9999
scale = .4,.4
trans = sub
id = 1409

[State 1300, 1]
type = Explod
trigger1 = Anim = 836
trigger1 = (Time%8) = 1
anim = 1070;882
postype = p1
facing = 1
pos = 54, -38
bindtime = -1
removetime = 12
ownpal = 1
sprpriority = -1
vel = -.3, 0
ontop = 1
removeongethit = 1
supermovetime = 9999
trans = sub
scale = .8,.8

[State 1320, 5]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, SA
hitflag = MAFD
guardflag = MA
animtype = Hard
damage = 10, 5
pausetime = 8, 8
guard.pausetime = 9, 9
sparkno = 3
sparkxy = -5, -7666
guard.sparkno = 40
hitsound = S1, 4
guardsound = S3, 2
ground.type = High
ground.slidetime = 15
ground.hittime = 15
air.hittime = 16
guard.hittime = 13
ground.velocity = -3, -7
air.velocity = -3, -7
guard.velocity = -5
getpower = 20
givepower = 50
;P1stateno = 1041
;p2stateno = 1044
envshake.time = 25
envshake.ampl = 25

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = movehit
value = 1044
ID = -1

[State 0, ChangeState]
type = ChangeState
triggerall = NumTarget;()
trigger1 = movehit 
value = 1041

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Anim = 836;939
id = 1409
;ignorehitpause =
;persistent =


[State 1383, VelSet]
type = VelSet
trigger1 = Anim = 836;939
trigger1 = Time = 9
x = 15
y = 0
;ignorehitpause = 0
;persistent = 1

[State 0, PosAdd]
type = null;PosAdd
trigger1 = Anim = 836;939
trigger1 = Time = 9
;trigger1 = command != "holdup"
;trigger1 = command != "holddown"
x = 0
y = -50
;ignorehitpause =
;persistent =

[State 1310, 1]
type = Explod
triggerall = Pos Y >= -2
trigger1 = time = 0
anim = 864
postype = p1
pos = 0, 5
bindtime = 1
removetime = -2
ownpal = 1
sprpriority = 3
vel = -1, 0
removeongethit = 1
;supermovetime = 9999
scale = 1,1

 [State 1380, 9]
type = ChangeState
trigger1 = Time = 320
trigger2 = frontedgedist <= 5
trigger2 = time >= 25
trigger3 = time >= 225
trigger4 = Pos y <= -500
value = 50
ctrl = 0

[State 1380, Explod]
type = Explod
trigger1 = time>10 && Time%3=0
anim = 7100
pos = 42,-40
postype = p1
facing = 1
bindtime = 0
vel = -3,-2
accel = 0.1,0.1
removetime = -2
scale = .35, .35
sprpriority = 20
trans = sub
xangle = 75
angle = random%360
removeongethit = 1
ownpal = 1

[State 1380, Explod]
type = Explod
trigger1 = time>10 && Time%3=0
anim = 7100
pos = 42,-40
postype = p1
facing = 1
bindtime = 0
vel = -3,2
accel = 0.1,-0.1
removetime = -2
scale = .35, .35
sprpriority = 20
trans = sub
xangle = 75
angle = random%360
removeongethit = 1
ownpal = 1

[State 1380, Explod]
type = Explod
trigger1 = time>10 && Time%3=0
trigger1 = numexplod(1080) = 0
anim = 786
pos = 42,-40
postype = p1
facing = 1
bindtime = -1
vel = 0,0
removetime = 3
scale = .75, .75
sprpriority = 65
removeongethit = 1
ownpal = 1
id = 56466

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 56466
trans = addalpha
alpha = floor(((time-10)/4.00)*255.00),255

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=14
ID = 56466
trans = addalpha
alpha = 255,255

[State 1380, 9]
type = ChangeState
trigger1 = Moveguarded
value = 1323
ctrl = 0

;---------------------------------------------------
; Can't Stop Me! part 2
[Statedef 1041]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 70
velset = 18, 0
anim = 7054

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = target,stateno != 1044
value = 1044
ID = -1

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7001
pos = 58,-38
postype = p1  ;p2,front,back,left,right
scale = 0.6,1.2
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time=0
id = 56466

[State 1380, Explod]
type = Explod
trigger1 = Time%3=0
anim = 7100
pos = 42,-40
postype = p1
facing = 1
bindtime = 0
vel = -3,-2
accel = 0.1,0.1
removetime = -2
scale = .35, .35
sprpriority = 20
trans = sub
ownpal = 1
xangle = 75
angle = random%360
ignorehitpause=1

[State 1380, Explod]
type = Explod
trigger1 = Time%3=0
anim = 7100
pos = 42,-40
postype = p1
facing = 1
bindtime = 0
vel = -3,2
accel = 0.1,-0.1
removetime = -2
scale = .35, .35
sprpriority = 20
ownpal = 1
trans = sub
xangle = 75
angle = random%360
ignorehitpause=1

[State 1380, Explod]
type = Explod
trigger1 = Time%3=0
anim = 786
pos = 42,-40
postype = p1
facing = 1
bindtime = -1
vel = 0,0
ownpal = 1
removetime = 3
sprpriority = 65
scale = .75, .75
removeongethit = 1
trans = addalpha
alpha = 255,255
id = 56461
ignorehitpause=1

[State 0, ModifyExplod]
type = null;ModifyExplod
trigger1 = 1
ID = 56461
trans = addalpha
alpha = 255,255
scale = 1.00+((time-6)/6.00)*0.50,1.00+((time-6)/6.00)*0.25

[State 0, ModifyExplod]
type = null;ModifyExplod
trigger1 = time>=6
ID = 56461
trans = addalpha
alpha = 255,255
scale = 1.50,1.25

[State 1300, 1]
type = Explod
trigger1 = Anim = 836
trigger1 = (Time%8) = 1
anim = 1070;882
postype = p1
facing = 1
pos = 54, -38
bindtime = -1
removetime = 12
ownpal = 1
sprpriority = -1
vel = -.3, 0
ontop = 1
removeongethit = 1
supermovetime = 9999
scale = .8,.8
trans = sub

[State 3002, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 16
PalAdd      =  -10, -10, -10
;PalMul      = .85,.85,.50
TimeGap  = 6
FrameGap = 1
Trans = Add
time = 900
PalBright   =  30, 30,  0
PalContrast =  90, 90, 90

[State 1320, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 10
ampl = 11

[State 1321, TargetBind]
type = null;TargetBind
trigger1 = AnimElem = 1
pos = 60,20

[State 1321, TargetBind]
type = TargetBind
trigger1 = AnimTime != 0
pos = 70,-10

[State 1321, PosSet]
type = null;PosSet
triggerall = pos y >= -100
trigger1 = Time = 0
y = 0

[State 250]
type = Explod
trigger1 = AnimElem = 1
anim = 6320
postype = p1
pos = -0, 0
bindtime = -1
removetime = -1
ownpal = 1
sprpriority = 6
ID = 555
scale =  1.5,1.5
removeongethit = 1

[State 1320, 1]
type = Explod
triggerall = Pos Y >= -2
trigger1 = time = 0
anim = 6050
postype = p1
pos = 35, 10
bindtime = 1
removetime = -2
ownpal = 1
sprpriority = 3
vel = -.3, 0
removeongethit = 1

[State 1320, 2]
type = Playsnd
trigger1 = time = 0
value = 8, 68

[State 1320, 2]
type = Playsnd
trigger1 = time = 12
value = 8, 86

[State 1320, 3]
type = VelSet
trigger1 = AnimElem = 8
x = 5.8
y = 0

[State 1320, 4]
type = null;StateTypeSet
trigger1 = AnimElem = 4 = 2
physics = A

[State 1321, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Frontedgedist <= 1
trigger2 = Time = 80
value = -100
;kill = 1
;absolute = 0
;ignorehitpause = 0
;persistent = 1

[State 1321, PlaySnd]
type = PlaySnd
;trigger1 = (Time % 0) = 1
trigger1 = Time = 0
value = 8,80
;volume = 0
;channel = -1
;lowpriority =
;freqmul = 1.0
;loop = 0
;pan = 0
;abspan = 0
;ignorehitpause = 0
;persistent = 1

[State 1300, 8]
type = ChangeState
trigger1 = Time >= 25
trigger1 = p2stateno != 1044
value = 1323
ctrl = 0

[State 1300, 8]
type = ChangeState
trigger1 = Time > 9
trigger1 = Frontedgedist <= 35
trigger2 = Time < 55
trigger2 = Frontedgedist <= 55
trigger3 = Time > 10
trigger3 = vel x = 0
trigger4 = Time > 350
value = 1042
ctrl = 0

[State 810, e]
type = NotHitBy
trigger1 = stateno = 1321
value2 = SCA
time = 1

[State 1300, 8]
type = ChangeState
trigger1 = P2movetype!= H
value = 0
ctrl = 1


;---------------------------------------------------
; Can't Stop Me! part 3
[Statedef 1042]
type = A
movetype = A
physics = N
ctrl = 0
poweradd = 70
;anim = 7065

[State 3022, 1]
type = PlaySnd
trigger1 = Time = 5
value = 7,370;335

[State 1325, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 2,9
volume = 200
pan = 10

[State 1325, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 8,81
volume = 200
pan = 10

[State 1325, HitAdd]
type = HitAdd
trigger1 = Time = 0
value = 1

[State 1325, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = Time = 0
value = -80

[State 1325, EnvShake]
type = EnvShake
trigger1 = Time = 1
time = 30
freq = 30
ampl = -14
;phase =
;ignorehitpause = 0
;persistent = 1

[State 1325, Pause]
type = Pause
trigger1 = Time = 0
time = 2
;movetime =
;ignorehitpause = 0
;persistent = 1

[State 1380, Explod]
type = Explod
trigger1 = Time < 20
anim = 7100
pos = 0,-37
postype = p2
facing = 1
;vfacing = 1
bindtime = 4
vel = (random%1000-500)*0.01,(random%1000-500)*0.01
;random = 0,0
removetime = -2
supermove = 999
;pausemovetime = 0
scale = .45, .45
sprpriority = 100
ontop = 1
;shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause = 0
;persistent = 1
angle = random%360
trans = sub

[State 1380, Explod]
type = Explod
trigger1 = Time < 20
anim = 7100
pos = 0,-37
postype = p2
facing = 1
;vfacing = 1
bindtime = 4
vel = (random%1000-500)*0.01,(random%1000-500)*0.01
;random = 0,0
removetime = 35
supermove = 999
;pausemovetime = 0
scale = .25, .25
sprpriority = 100
ontop = 1
;shadow = 0,0,0
ownpal = 1
removeongethit = 1
;ignorehitpause = 0
;persistent = 1
angle = random%360
trans = sub

[State 1380, Explod]
type = Explod
trigger1 = Time<3
trigger1 = numexplod(1080) = 0
anim = 943;3
pos = 35,-37;167,80
postype = p1;left
facing = 1
;vfacing = 1
bindtime = 1
vel = 0,0
;random = 0,0
removetime = 35
supermove = 999
;pausemovetime = 0
scale = 1,1
sprpriority = 120
angle = random%360
;sprpriority = -5
;shadow = 0,0,0
;ownpal = 0
removeongethit = 1
;ignorehitpause = 0
;persistent = 1
id = 1080
trans = sub

[State 1300, 8]
type = SelfState
trigger1 = Time = 25
value = 1323
ctrl = 0

;---------------------------------------------------
; P2 Tackle
[Statedef 1044]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 70
anim = 5020;5012

[State 810, e]
type = NotHitBy
trigger1 = P2stateno = 1041
value2 = SCA
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = P2stateno = 1490
x = -4
y = -4
;ignorehitpause =
;persistent =

[State 1300, 8]
type = ChangeState
trigger1 = P2stateno != 1041 && P2stateno != 1042
value = 1045
ctrl = 0

;---------------------------------------------------
; P2 Tackle part 2
[Statedef 1045]
type = A
movetype = H
physics = N
ctrl = 0
poweradd = 0
anim = 5050;5012

[State 1300, 8]
type = SelfState
trigger1 = time>25
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
;Shadow Slash
[Statedef 1050]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1707
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S7,330
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S5,3
channel = -1

[State 0, Explod]
type = Explod
trigger1 = time<16
anim = 7101
pos = 8,-42
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = -1.5,-2.5
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time<16
anim = 7101
pos = 18,-46
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 2,-2
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>16 && time<24
anim = 7101
pos = 18,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 3.00-((time-16)/20.00),3
accel = 0,0
random = 16+(time-16),16+(time-16)
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>16 && time<24
anim = 7101
pos = 22,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 2.5-((time-16)/20.00),2.5
accel = 0,0
random = 16+(time-16),16+(time-16)
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>=20 && time<32
anim = 7101
pos = 32,-58
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 5.00-((time-16)/20.00),3
accel = 0,0
random = 16+(time-16),16+(time-16)
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>=20 && time<32
anim = 7101
pos = 0,-26
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = -((time-16)/20.00),3.5
accel = 0,0
random = 16+(time-16),16+(time-16)
removetime = -2
pausemovetime = 0
scale = 0.075,0.075
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>16 && random%30>time-16
anim = 7101
pos = 0,-42
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (-random%1000)/100.00,(random%1000)/500.00
accel = 0,0
random = 20,32
removetime = -2
pausemovetime = 0
scale = 0.08,0.08
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>16 && random%30>time-16
anim = 7101
pos = 0,-54
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (-random%1000)/100.00,(random%1000)/500.00
accel = 0,0
random = 20,32
removetime = -2
pausemovetime = 0
scale = 0.08,0.08
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
v = 5    ;fv = 
value = -25

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Shadow Slash"
ID = 1051
stateno = 1051
pos = 16,-42
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Shadow Slash Helper
[Statedef 1051]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 99999
sprpriority = 2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 12

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7101
pos = -12,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (-random%1000)/100.00,(random%1000)/500.00
accel = 0,0
random = 20,32
removetime = -2
pausemovetime = 0
scale = 0.08,0.08
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7101
pos = -24,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (-random%1000)/100.00,(random%1000)/500.00
accel = 0,0
random = 20,32
removetime = -2
pausemovetime = 0
scale = 0.08,0.08
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (-random%1000)/1000.00,(random%1000)/500.00
accel = 0,-0.05
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.20,0.20
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 210, 2]
type = Projectile
trigger1 = !root,numtarget(1051)
projanim = 99999
projremove = 1
projremovetime = 1
projid = 1051
attr = A, SP
id = 1051
offset = 0,0
animtype  = Hard
damage    = 64,0
hitflag = MAF+
guardflag = MA
pausetime = 0,16
guard.pausetime = 0,60
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-32
hitsound   = S5,18
guardsound = S3,1
ground.type = High
ground.slidetime = 40
ground.hittime  = 20
ground.velocity = facing*3
air.velocity = 2.2,-2
givepower = 11
getpower = 0
guard.velocity = -10
guard.slidetime = 60
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 10

[State 210, 2]
type = Projectile
trigger1 = !root,numtarget(1051)
projanim = 99999
projremove = 1
projremovetime = 1
projid = 1051
attr = A, SP
id = 1051
offset = 0,0
animtype  = Hard
damage    = 64,0
;hitflag = MAF-
guardflag = MA
pausetime = 0,120
guard.pausetime = 0,60
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-32
hitsound   = S5,18
guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = facing*3
air.velocity = 2.2,-2
givepower = 11
getpower = 0
guard.velocity = -10
guard.slidetime = 60
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 10
p2stateno = 5600

[State 0, EnvShake]
type = EnvShake
trigger1 = root,numtarget(1051)
time = 4
freq = 60
ampl = -3
phase = 90

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/500.00,(500-random%1000)/100.00
accel = 0,0
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.60,0.60
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/500.00,(500-random%1000)/100.00
accel = 0,0
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.60,0.60
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/500.00,(500-random%1000)/100.00
accel = 0,0
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.60,0.60
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/500.00,(500-random%1000)/100.00
accel = 0,0
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.60,0.60
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/500.00,(500-random%1000)/100.00
accel = 0,0
random = 20,24
removetime = -2
pausemovetime = 0
scale = 0.60,0.60
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = -6,(500-random%1000)/500.00
accel = 0,0
random = 24,8
removetime = -2
pausemovetime = 0
scale = 0.50,0.50
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = root,numtarget(1051)
anim = 7100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 6,(500-random%1000)/500.00
accel = 0,0
random = 24,8
removetime = -2
pausemovetime = 0
scale = 0.50,0.50
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = add
angle = random%360

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>200
trigger2 = root,numtarget(1051)
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
; Unjust Cut
; CNS difficulty: easy
[Statedef 1070]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1712

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time=0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time<10
flag = invisible

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = -8,8
ignorehitpause = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = time=0
time = 10
length = 8
trans = sub

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S7,213

[State 0, TargetDrop]
type = TargetDrop
trigger1 = time = 0
excludeID = -1
keepone = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 10
time = 6
freq = 60
ampl = -4
phase = 90

[State 0, VelSet]
type = VelSet
trigger1 = time=4
x = 8+((p2bodydist x)/8.00)
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = vel x/5.00
y = -10

[State 0, VelSet]
type = VelMul
trigger1 = time>10
x = 0.95

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 786
ID = 786
pos = 14,-42
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 90
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 10
ontop = 0
shadow = 0,0,0
ownpal = 1
angle = 90
trans = addalpha
alpha = 255,255
removeongethit = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>20
ID = 786
scale = 1,1
trans = addalpha
alpha = floor(255-((time-19)*(255/10.00))),255
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = Time = 0
attr = C, SA
animtype  = Up
damage    = 65,3
hitflag = MAF
guardflag = MA
pausetime = 8,10
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,4
guardsound = S3,2
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -1.2,-8
air.velocity = -3.2,-1
givepower = -50
getpower = 65
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
fall = 1

[State 0, TargetBind]
type = TargetBind
trigger1 = Numtarget>0 && time<28
time = 1
id = -1
pos = 32,-8
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 7000
pos = 40,-52
vel = 0,-6
postype = p1  ;p2,front,back,left,right
scale = 1,1
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
anim = 7000
pos = 40,-52
postype = p1  ;p2,front,back,left,right
scale = 1,3
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = Time = 30
id = 786
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<11
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 3
pausemovetime = 0
scale = 1,1
sprpriority = -4
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 200,255-200

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 5
pausemovetime = 0
scale = 1,1
sprpriority = -5
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 150,255-150

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 8
pausemovetime = 0
scale = 1,1
sprpriority = -7
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 100,255-100

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 8
pausemovetime = 0
scale = 1,1
sprpriority = -8
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 50,255-50

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 9
pausemovetime = 0
scale = 1,1
sprpriority = -9
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 40,255-40

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = -10
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 30,255-30

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 11
pausemovetime = 0
scale = 1,1
sprpriority = -11
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 20,255-20

[State 0, Explod]
type = Explod
trigger1 = time>3 && time<10
anim = anim
ID = 100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 12
pausemovetime = 0
scale = 1,1
sprpriority = -12
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 10,255-10

[State 0, VelAdd]
type = VelAdd
trigger1 = numtarget>0
trigger1 = Time = 30
y = -3

[State 40, 6]
type = ChangeState
triggerall = numhelper(100000)>0
triggerall = Time = 30
trigger1 = MoveHit && p2bodydist X < 32
value = 610
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = Time = 30
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Shadow Strike
[Statedef 1060]
type    = A
movetype= A
physics = C
juggle  = 0
ctrl = 0
anim = 1708
sprpriority = 0

[State 0, VarSet]
type = Changestate
triggerall = numhelper(100000)>0 && helper(100000),var(5)>400 && random%1000<200
trigger1 = time=0
value = 2050

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0 && pos y>-1
statetype = C       ;S,A,C,L

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = statetype = A
physics = N

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 1708
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 40
scale = 1,1
sprpriority = 1
shadow = 90,80,20
ownpal = 1
removeongethit = 1

[State 0, PalFX]
type = PalFX
trigger1 = time>=10 && time<20
time = 1
add = 0,0,0
mul = floor(256.00-((time-10)/10.00)*256.00),floor(256.00-((time-10)/10.00)*256.00),floor(256.00-((time-10)/10.00)*256.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=20
time = 1
add = 0,0,0
mul = 0,0,0
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, VelMul]
type = VelMul
trigger1 = time = 0
x = 0.1
y = 0.1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S7,201
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S7,330
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S5,3
channel = -1

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 897
pos = -2,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 30
pausemovetime = 0
scale = 0.45,0.25
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1
trans = add
angle = 0

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 897
pos = 30,-42
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 30
pausemovetime = 0
scale = 0.45,0.25
sprpriority = 5
ontop = 0
ownpal = 0
removeongethit = 1
trans = add
angle = 0

[State 0, Explod]
type = Explod
trigger1 = time<26
anim = 887
pos = 30,-42
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.45,0.25
sprpriority = 2
ontop = 0
ownpal = 0
removeongethit = 1
trans = add
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time<26
anim = 887
pos = -2,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.45,0.25
sprpriority = 2
ontop = 0
ownpal = 0
removeongethit = 1
trans = add
angle = random%360

[State 0, VarAdd]
type = VarAdd
trigger1 = time=20
v = 5    ;fv = 
value = -50

[State 0, Helper]
type = Helper
trigger1 = time=20
helpertype = normal ;player
name = "Shadow Bolt"
ID = 1061
stateno = 1061
pos = (enemynear,pos x-pos x)*facing,pos y
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, VarSet]
type = Null
triggerall = numhelper(100000)>0 && helper(100000),var(5)>100
trigger1 = helper(100000),cond(1,var(1) := 32,0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0 && helper(100000),var(5)>100
Trigger1 = Time > 40
trigger1 = helper(100000),cond(1,var(50) := 5,0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0
Trigger1 = Time > 40
trigger1 = helper(100000),var(5)>100
trigger1 = helper(100000),cond(1,var(49) := ifelse((enemy,statetype = L || p2bodydist X > 24),1060,1200),0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0
Trigger1 = Time > 40
trigger1 = helper(100000),var(5)<100 && p2bodydist X <= 24
trigger1 = helper(100000),cond(1,var(49) := 1200,0)

[State 800, 2]
type = ChangeState
Trigger1 = Time > 40
value = ifelse(statetype = A,50,0)
ctrl = 1

;---------------------------------------------------------------------------
; Shadow Bolt Helper
[Statedef 1061]
type = A
movetype = I
physics = N
anim = 930;954
sprpriority = 5
ctrl = 0
velset = 0,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 10011
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 2
shadow = 90,80,20
ownpal = 0
trans = sub
removeongethit = 1

  ; blue
[State 0, ]
type = Explod
triggerall = Time >= 0
;triggerall = Time <= 59
trigger1 = (Time%3) = 1
anim = 1085;881
;ID =
pos = 0,-200
postype = p1
;facing = 1
;vfacing = 1
bindtime = -1
vel = 0,0
;accel = -.008,0
random = 0,1
removetime = 5
supermove = 9999
;pausemovetime = 0
scale = .23, 4.23
sprpriority = -55
ontop = 0
;shadow = 0,0,0
;ownpal = 0
trans=sub
removeongethit = 1
;ignorehitpause = 0
;persistent = 1

[State 4233, BGPalFX]
type = BGPalFX
triggerall = Time >= 0
triggerall = Time <= 5
trigger1 = (time % 8) = 1
time = 3
time = 9999
add = -15,-255,-25
sinadd = 400,500,500,256

[State 0, EnvShake]
type = EnvShake
trigger1 = Time%15=0
time = 12
ampl = 5

[State 0, PosSet]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 182, 2]
type = PlaySnd
trigger1 = Time = 0
value = 7, 344

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
freq = 120
ampl = -6
phase = 90

[State 210, 2]
type = Projectile
trigger1 = time = 0 && !root,projhit1061 = 1
projanim = 6201
projremove = 1
projremovetime = 10
attr = A, SP
id = 1061
animtype  = Hard
damage    = 46,3
hitflag = MAFD
guardflag = MA
pausetime = 0,8
sparkno = S7000
guard.sparkno = -1
sparkxy = 0,enemy,pos y-32
hitsound   = S1,4
guardsound = S3,1
ground.type = High
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = 2,-8
air.velocity = 2,-8
air.hittime = 999
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
fall.yvelocity = -2
air.fall = 1
envshake.time = 7
envshake.ampl = 4

[State 210, 2]
type = Projectile
trigger1 = time = 0 && root,projhit1061 = 2
projanim = 6201
projremove = 1
projremovetime = 10
attr = A, SP
id = 1061
animtype  = Hard
damage    = 20,3
hitflag = MAFD
guardflag = MA
pausetime = 0,8
sparkno = S7000
guard.sparkno = -1
sparkxy = 0,enemy,pos y-32
hitsound   = S1,4
guardsound = S3,1
ground.type = High
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = 2,16
air.velocity = 2,16
air.hittime = 999
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
fall.yvelocity = -2
air.fall = 1
envshake.time = 7
envshake.ampl = 4

ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = 0,-55,-200

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[state 196, 9]
type = destroyself
trigger1 = time = 20

;---------------------------------------------------------------------------
; Foot Fancy
[Statedef 1100]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = A                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 952

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
ID = 1100
animtype  = Med
damage    = 16,3
hitflag = MAF
guardflag = MA
pausetime = 3,11
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,3
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -1.2
air.velocity = -2.2,-2
givepower = 11
getpower = 13
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 6
attr = A, SA
ID = 1101
animtype  = Med
damage    = 22,3
hitflag = MAF
guardflag = MA
pausetime = 3,11
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,2
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -1.2
air.velocity = -2.2,-2
givepower = 11
getpower = 13
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3

[State 0, PlayerPush]
type = PlayerPush
triggerall = numtarget
triggerall = target,GetHitVar(fall)=1
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
value = 0
;ignorehitpause = 
;persistent = 

[State 0, TargetBind]
type = TargetBind
;triggerall = numtarget(1100) || numtarget(1101)
triggerall = numtarget && target,GetHitVar(fall)=1
triggerall = movehit
trigger1 = AnimElem = 2
time = 3
;id = 1100
pos = 42,24
ignorehitpause = 1
;persistent = 

[State 0, TargetBind]
type = TargetBind
;triggerall = numtarget(1100) || numtarget(1101)
triggerall = numtarget && target,GetHitVar(fall)=1
triggerall = movehit
trigger1 = AnimElem = 6
time = 3
;id = 1101
pos = 42,24
ignorehitpause = 1
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
trigger1 = movehit
anim = 7001
pos = 50,-20
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger1 = movehit
anim = 7001
pos = 50,-24
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
triggerall = movecontact
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
time = 4
freq = 60
ampl = -4
phase = 90
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = movehit
y = 0.4
ignorehitpause = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = AnimElem = 2
trigger2 = AnimElem = 6
;ignorehitpause = 
;persistent = 


[State 1240, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 2,1;


[State 1240, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 2,2;

[State 0, Explod]
type = Explod
trigger1 = numhelper(100000)>0
trigger1 = Time>60
anim = 6100
ID = 110000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 300+random%700

[State 40, 6]
type = ChangeState
triggerall = numhelper(100000)>0
trigger1 = Time>60
trigger1 = MoveHit && p2bodydist X < 48
value = 1150
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = Time>60
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Face-to-Foot
[Statedef 1150]
type    = A                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 46

[State 0, VelSet]
type = VelSet
trigger1 = time<5 && time>1
x = -8
y = -6

[State 0, VelSet]
type = VelMul
trigger1 = time>3 && time<20
x = 0.60
y = 0.85

[State 0, VelSet]
type = VelAdd
trigger1 = time>=10 && time<30
x = 4
y = 2.25

[State 0, VelMul]
type = VelMul
trigger1 = time>10 && pos y<-1
trigger2 = vel x > 7
x = 0.85

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=5
value = S7,213
channel = -1

[State 220, 3]
type = Afterimage
trigger1 = Time = 0
time = 10
Trans = Add
PalMul      =     0.5,  0,  0
PalAdd      =     116, 16, 16
PalBright   =   -32,-32,24
;PalContrast =   128,128,128
length      =    5
gap         =    1
framegap    =     1

[State 220, 3]
type = Afterimage
trigger1 = Time%10=0 && time>0
time = 10
Trans = Add
PalMul      =     0.5,  0,  0
PalAdd      =     116, 16, 16
PalBright   =   -32,-32,24
;PalContrast =   128,128,128
length      =    8
gap         =    1
framegap    =     1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 10
value = 1703
elem = 1

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 8    ;fv = 10
value = 0

[State 0, VarSet]
type = VarSet
triggerall = anim = 1703
trigger1 = NumTarget(1150)>0
v = 8    ;fv = 10
value = 1
ignorehitpause = 1

[State 210, 2]
type = HitDef
triggerall = anim = 1703
trigger1 = NumTarget(1150)<1
attr = A, SA
ID = 1150
animtype  = Med
damage    = 65,2
hitflag = MAF
guardflag = LA
pausetime = 12,18
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,4
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -1.2
air.velocity = -2.2,-2
givepower = 11
getpower = 13
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3

[State 0, Explod]
type = Explod
trigger1 = var(8)
anim = 7002
pos = 16,0
postype = p1  ;p2,front,back,left,right
scale = 0.65,0.65
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time>10
value = 0

[State 0, Explod]
type = Explod
triggerall = NumTarget(1150) && time%6=0
trigger1 = movehit && pos y > -1
anim = 1001
pos = 64,0
vel = 0,pos y
postype = p1  ;p2,front,back,left,right
scale = 0.65,0.65
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1150) && time%6=0
trigger1 = movehit && pos y > -1
time = 8
freq = 60
ampl = -3

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1150) && time%6=0
trigger1 = movehit && pos y > -1
value = S1,3

[State 0, Explod]
type = Explod
triggerall = NumTarget(1150) && time%3=0
trigger1 = movehit && pos y > -1
anim = 7000
pos = 48,-12
random = 48,24
vel = -8,0
postype = p1  ;p2,front,back,left,right
scale = 0.45,0.45
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = NumTarget(1150) && time%6=0
trigger1 = movehit && pos y > -1
value = -8
ID = -1
kill = 1
absolute = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1150) && time%6=0
trigger1 = movehit && pos y > -1
value = 5605
ID = -1

[State 0, VelSet]
type = VelSet
trigger1 = pos y>0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y>0
y = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = NumTarget(1150)
time = 1
id = -1
pos = 16,0

[State 0, TargetDrop]
type = TargetDrop
trigger1 = time>80
trigger2 = pos y>-1 && NumTarget(1150)<1

[State 0, Explod]
type = Explod
trigger1 = numhelper(100000)>0
trigger1 = time>80
anim = 6100
ID = 70000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 100

[State 0, ChangeState]
type = ChangeState
trigger1 = numhelper(100000)>0 && p2bodydist X < 32
trigger1 = time>80 && NumExplod(4500)<1 && random%1000>helper(100000),var(5) && random%1000<750
value = 24
ctrl = 0

[State 0, VarSet]
type = Null
triggerall = numhelper(100000)>0 && helper(100000),var(5)>50
trigger1 = time>80
trigger1 = helper(100000),cond(1,var(1) := 128,0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0 && helper(100000),var(5)>50
trigger1 = time>80
trigger1 = helper(100000),cond(1,var(50) := 15,0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0 && helper(100000),var(5)>50
trigger1 = time>80
trigger1 = helper(100000),cond(1,var(49) := ifelse((enemy,statetype = L || p2stateno = 5605) || p2bodydist X > 48,1060,1200),0)

[State 0, ChangeState]
type = ChangeState
triggerall = numhelper(100000)>0 && helper(100000),var(5)>100
trigger1 = time>80
value = 23
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = numhelper(100000)>0 && random%1000<5000
trigger1 = time>80
value = 105
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time>80
trigger2 = pos y>-1 && NumTarget(1150)<1
value = ifelse(pos y < 0,50,0)
ctrl = 1

;---------------------------------------------------------------------------
; Normal/EX-Air Smot
[Statedef 1160]
type = A
movetype = A
physics = N
juggle  = 20
poweradd= 0
ctrl = 0
sprpriority = 2
anim = 620

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = ishelper
trigger1 = parent,var(11)<60
v = 11    ;fv = 
value = 60

[State 0, VelMul]
type = VelMul
trigger1 = anim != 1017
x = 0.8
y = 0.8

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElem = 5 && time<50
value = 620
elem = 4

[State 1240, 1]
type = PlaySnd
trigger1 = time%30=0 && AnimElem = 4
trigger2 = AnimTime = -6 && ishelper && anim = 620
value = 5,6;

[State 1240, 1]
type = PlaySnd
trigger1 = AnimTime = -6 && ishelper && anim = 620
value = 5,16;

[State 1240, 1]
type = PlaySnd
trigger1 = AnimTime = -6 && ishelper && anim = 620
value = 1,163;

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimTime = -6 && ishelper && anim = 620
value = 1017
elem = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimTime = 10 && ishelper && anim = 1017
value = S9,94

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 15 && anim = 1017
time = 8
freq = 60
ampl = -3
persistent = 0

[State 0, VelSet]
type = VelAdd
trigger1 = anim = 1017
x = -0.1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 15 && anim = 1017
x = -12

[State 0, Trans]
type =null; Trans
trigger1 = ishelper
trans = addalpha
alpha = 256,0

[State 0, PalFX]
type = PalFX
trigger1 = ishelper
time = 1
add = -200,-200,-200
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 0
color = 0

[State 0, VarAdd]
type = ParentVarAdd
trigger1 = time = 0 && ishelper
v = 5    ;fv = 
value = -50

[State 0, VarAdd]
type = VarAdd
trigger1 = time>10 && time<60
v = 5    ;fv = 
value = -1

[State 0, Helper]
type = Helper
trigger1 = time = 0 && ishelper
helpertype = normal ;player
name = "EX Effect"
ID = 6000
stateno = 6000
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1240, 1]
type = PlaySnd
trigger1 = time%5=0 && time<54
value = 5,3;

[State 0, Explod]
type = Explod
trigger1 = time<54 && time>10 && ishelper
anim = 7100
pos = 80,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 12,4
accel = 0,0
random = 16,16
removetime = -2
pausemovetime = 0
scale = 0.25,0.25
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  random%360
xangle = 0
yangle = 0

[State 0, Explod]
type = Explod
trigger1 = time<54 && time>10 && !ishelper
anim = 7100
pos = 80,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 12,4
accel = 0,0
random = 16,16
removetime = -2
pausemovetime = 0
scale = 0.25,0.25
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = add
angle =  random%360
xangle = 0
yangle = 0

[State 210, 2]
type = Projectile
trigger1 = time<54 && time>6 && time%5=0
projanim = 6101
projremove = 1
projremovetime = 16
projscale = 0.5,0.5
velocity = 12,4
remvelocity = 0,0
offset = 80,0
projid = 2050
id = 3050
attr = A, HA
animtype  = Hard
damage    = ifelse(ishelper,9,8),3
hitflag = MAFD
guardflag = MA
pausetime = 0,12
sparkno = S7000
sparkxy = -9999,0
guard.sparkno = -1
hitsound   = S1,3
guardsound = S3,1
ground.type = High
ground.slidetime = 40
ground.hittime  = 70
air.hittime = 70
ground.velocity = -3,0
air.velocity = -3,-1
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 0
fall.recover = 0
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 40
palfx.add = -100,-100,-100
palfx.sinadd = 80,80,80,10

[State 0, NotHitBy]
type = NotHitBy
trigger1 = ishelper
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 900

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>160

[State 1300, 8]
type = ChangeState
trigger1 = AnimTime=0 && !ishelper
trigger1 = numhelper(100000)>0 && p2bodydist X < 80
value = 1150

[State 200, 7]
type = ChangeState
trigger1 = AnimTime=0 && !ishelper
value = ifelse(pos y < 0,50,0)
ctrl = 1

;---------------------------------------------------------------------------
; Shurakane
[Statedef 1200]
type    = C                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = C                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 250

[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 0.5
y = 0.25

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x < -2 && time=40 && numhelper(100000)>0

[State 0, Enemy is just a bit too far, use the charge move]
type = Explod
trigger1 = numhelper(100000)>0 && time<1 && p2bodydist x > 128 && enemy,pos y < 0 && p2movetype = H
ID = 10401
pos = 0,9999
postype = p1  ;p2,front,back,left,right
removetime = 32
scale = 1,1

[State 0, Enemy is just a bit too far, use the charge move]
type = ChangeState
trigger1 = numhelper(100000)>0 && time<1 && p2bodydist x > 128 && p2movetype = H
;trigger1 = power > 1000
value = ifelse(enemy,pos y < 0,40,1040)
ctrl = 0

[State 0, Hyper Ground Pound]
type = ChangeState
triggerall = numhelper(100000)>0 && time<1 && p2bodydist x < 64
trigger1 = helper(100000),var(52)>600 && power>1500 && random<750
;trigger1 = power > 1000
value = 3050
ctrl = 0

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Twister Effect"
ID = 1201
stateno = 1201
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 967
trigger1 = time >= 0
trigger1 = time <= 50
trigger1 = (Time%15) = 1
value = 7,326;106

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
trigger2 = time = 45
value = 7,329;106

[State 0, Explod]
type = Explod
trigger1 = time=3
anim = 865
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = -2,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time=3
anim = 865
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 2,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time>12
statetype = A       ;S,A,C,L
physics = A         ;A,C,S,N

[State 0, VelSet]
type = VelSet
trigger1 = anim = 967
trigger1 = time<43
y = -(1.00-(time/50.00))*5.00

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=8
value = 967
elem = 1

[State 210, 2]
type = HitDef
trigger1 = anim = 967 && time%4=0
attr = A, SA
ID = 1200
animtype  = Med
damage    = 12,2
hitflag = MAF
guardflag = M
pausetime = 0,ifelse(time>40,15,2)
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,ifelse(time>40,4,ifelse(random%1000<500,3,1))
guardsound = S3,ifelse(time>40,3,1)
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = 0,-8
air.velocity = 0,-2
givepower = 11
getpower = 13
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
ignorehitpause = 1
fall = 1

[State 0, TargetBind]
type = null;TargetBind
;triggerall = numtarget(1100) || numtarget(1101)
;triggerall = numtarget && target,GetHitVar(fall)=1
triggerall = movehit
trigger1 = AnimElem = 2
time = 3
;id = 1100
pos = 54,-8
ignorehitpause = 0
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time<43
trigger1 = movehit
anim = ifelse(time>40,7002,7000)
pos = 0,-64
random = 48,96
postype = p2  ;p2,front,back,left,right
scale = 0.75,0.75
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = movecontact
time = 4
freq = 60
ampl = -ifelse(time>40,8,4)
phase = 90
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !movehit
trigger1 = Time>44
x = 0
y = 15
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movehit
trigger1 = Time>44
x = 0
y = -5
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = numhelper(100000)>0
trigger1 = time=0
anim = 6100
ID = 120000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 400

[State 200, 7]
type = ChangeState
trigger1 = Time>44 && movehit && numhelper(100000)>0
value = 620
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = Time>44 && numhelper(100000)>0 && p2bodydist x > 32 && p2bodydist x < 180 && pos y-enemy,pos y>20 && pos y-enemy,pos y<40
trigger1 = helper(100000),var(5)>200
value = 1160
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = Time>44
value = 50
ctrl = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = movecontact
trigger1 = Time<43
ignorehitpause = 1

;---------------------------------------------------------------------------
; Shurikane Twister
[Statedef 1201]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermovetime = 99999
pausemovetime = 99999

[State 0, PosSet]
type = PosSet
trigger1 = var(1)<60
time = 1
facing = 0
pos = 0,-root,pos Y

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 1    ;fv = 10
value = 60
;ignorehitpause = 
;persistent = 

[State 0, VarAdd]
type = VarAdd
trigger1 = var(1)<60 || parent,stateno!=1200
v = 1    ;fv = 
value = -1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
id = 1202

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
id = 1201

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(1)<1

[State 0, PalFX]
type = PalFX
trigger1 = time<10
time = 1
add = 0,0,0
mul = floor(((time)/10.00)*100.00),floor(((time)/10.00)*100.00),floor(((time)/10.00)*100.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=10
trigger1 = var(1)>=60
time = 1
add = 0,0,0
mul = 100,100,100
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = var(1)<60
time = 1
add = 0,0,0
mul = floor((var(1)/60.00)*100.00),floor((var(1)/60.00)*100.00),floor((var(1)/60.00)*100.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(1)>=60
id = 1201
scale = 2.00+(60-var(1))/70.00,(-parent,pos Y/240.00)+0.30
trans = add

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(1)<60
id = 1201
scale = 2.00+(60-var(1))/70.00
trans = add

[State 0, Explod]
type = Explod
trigger1 = time<3
id = 1201
anim = 982
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 2,0.5
sprpriority = 20
ontop = 0
ownpal = 0
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(1)>=60
id = 1202
scale = 1.00+(60-var(1))/30.00,(-parent,pos Y/180.00)+0.30
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(1)<60
id = 1202
scale = 1.00+(60-var(1))/30.00
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time<2
id = 1202
anim = 982
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 2,0.5
sprpriority = 20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Shadow Command
[Statedef 1210]
;type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
;physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 783

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < 0
physics = A         ;A,C,S,N

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < 0
x = 0
y = (-32-pos y)/50.00

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.8
y = 0.75

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animelem = 5
value = 783
elem = 4

[State 0, PalFX]
type = PalFX
trigger1 = time<15
time = 1
mul = floor(256-((time/15.00)*256.00)),floor(256-((time/15.00)*256.00)),floor(256-((time/15.00)*256.00))
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>14
time = 1
mul = 0,0,0
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, Glowing Sparkles shadowbeast mode]
type = Explod
trigger1 = time>15
anim = 7101
pos = 0,-6
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = ((750.00-Random%2000)/1000.00)*1.00,((200-(Random%8000))/1000.00)*(8.00)
accel = 0,0
random = 72,8
removetime = -2
scale = 0.15,0.15
sprpriority = 3-random%6
ownpal = 1
trans = sub
angle = random%360
yangle = 70
supermovetime = 99999999

[State 0, PalFX]
type = PalFX
trigger1 = time>14
time = 1
mul = 0,0,0
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 10015
ID = 10015
pos = -8,-73
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
random = 0,0
scale = 0.1,0.1
sprpriority = 250
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 120,255
supermovetime = 99999
pausemovetime = 99999
angle = 20-random%40

[State 1240, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,0;

[State 0, VarSet]
type = null
trigger1 = time=0 && numhelper(2500)>0
trigger1 = helper(2500),cond(1,var(40) := 0,0)

[State 0, VarSet]
type = null
triggerall = time>5
trigger1 = command = "x" && numhelper(100000)<1
trigger1 = helper(2500),cond(1,var(40) := 1,0)

[State 0, VarSet]
type = null
triggerall = time>5
trigger1 = command = "y" && numhelper(100000)<1
trigger1 = helper(2500),cond(1,var(40) := 2,0)

[State 0, VarSet]
type = null
triggerall = time>5
trigger1 = command = "b" && numhelper(100000)<1
trigger1 = helper(2500),cond(1,var(40) := 3,0)

[State 0, Use Shadow Beast: AI]
type = null
triggerall = time>5
triggerall = numhelper(100000)>0
trigger1 = helper(2500),cond(1,var(40) := helper(100000),var(25),0)
trigger1 = helper(100000),cond(1,var(25) := 0,0)

[State 200, 7]
type = ChangeState
trigger1 = helper(2500),var(40)>0
value = ifelse(pos y >-1,0,50)
ctrl = 1

;---------------------------------------------------

; Jump back after Tackle
[Statedef 1323]
type = A
movetype = I
physics = N
ctrl = 0
;poweradd = 70
velset = -3, -5
Facep2 = 1

[State 1323, VelSet]
type = VelSet
trigger1 = Prevstateno != 2081
trigger2 = Prevstateno != 1362
trigger3 = Prevstateno != 1490
x = -4
y = -4

[State 1323, VelSet]
type = VelSet
trigger1 = time >= 0
trigger1 = Prevstateno = 1362
x = -3
y = -2.125

[State 1323, Turn]
type = Turn
trigger1 = time >= 0
trigger1 = Prevstateno = 2081

[State 1323, PosSet]
type = PosSet
trigger1 = time = 0
trigger1 = Prevstateno = 2081
;x =
y = -20

[State 1323, VelSet]
type = VelSet
trigger1 = Prevstateno = 2081
x = 3
y = -5

[State 1323, VelSet]
type = VelSet
trigger1 = Prevstateno = 4517
x = -4
y = -5.5

[State 1323, VelSet]
type = VelSet
trigger1 = Prevstateno = 1490
x = -7
y = -2.5

[State 1323, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 45

[State 1320, 2]
type = Playsnd
trigger1 = time = 10
value = 7, 326

[State 0, Enemy is just a bit too far, use the charge move]
type = Explod
trigger1 = time = 0
ID = 1323
pos = 0,9999
postype = p1  ;p2,front,back,left,right
removetime = 200
scale = 1,1

[State 1300, 8]
type = ChangeState
triggerall = !ishelper
triggerall = numhelper(100000)>0 && helper(100000),var(5)>100
trigger1 = time>=10
;trigger1 = pos y > -120
value = 1160

[State 1300, 8]
type = ChangeState
trigger1 = Time >= 10
value = 50
ctrl = 1

[State 1323, VelSet]
type = VelSet
triggerall = Pos y >= -80
trigger1 = AnimElem = 3
;x =
y = .2
;ignorehitpause = 0
;persistent = 1

;---------------------------------------------------------------------------
; EX-Lash Stun
[Statedef 2000]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 752
velset = 0,0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "EX Effect"
ID = 6000
stateno = 6000
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1240, 1]
type = PlaySnd
trigger1 = time%5=0 && time<30
value = 5,3;

[State 1240, 1]
type = PlaySnd
trigger1 = time%5=0 && time<30
value = 7,360;

[State 0, Explod]
type = Explod
trigger1 = time%10=0 && time<30
anim = 10000
pos = 0,-32
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 64,64
removetime = -2
pausemovetime = 0
scale = 0.2,36
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  random%360
xangle = 0
yangle = 0

[State 0, Explod]
type = Explod
trigger1 = (time+5)%10=0 && time<30
anim = 10000
pos = 0,-32
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 64,64
removetime = -2
pausemovetime = 0
scale = 0.2,36
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = add
angle =  random%360
xangle = 0
yangle = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Lash Helper"
ID = 2001
stateno = 2001
pos = 0,0
postype = p2    ;p2,front,back,left,right

[State 0, TargetState]
type = TargetState
trigger1 = NumTarget && projhit2001 = 1
value = 5600
ID = -1

[State 200, 7]
type = ChangeState
trigger1 = Time>30
value = ifelse(pos y < 0,50,0)
ctrl = 1

;---------------------------------------------------------------------------
; EX-Shadow Storm
[Statedef 2050]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 500                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1007
velset = 0,0

[State 182, 2]
type = PlaySnd
trigger1 = Time = 18
value = 7, 348;304;55;330

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "EX Effect"
ID = 6000
stateno = 6000
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
trigger1 = time=18
anim = 6200
pos = -48,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
removetime = -2
pausemovetime = 0
scale = 1,3
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time=18
anim = 6200
pos = 48,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
removetime = -2
pausemovetime = 0
scale = 1,3
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub

[State 0, Helper]
type = Helper
trigger1 = time = 18
helpertype = normal ;player
name = "EX Lightning Helper"
ID = 2051
stateno = 2051
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 1240, 1]
type = PlaySnd
trigger1 = time%5=0 && time<30
value = 5,3;

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0
trigger1 = Time > 60
trigger1 = helper(100000),cond(1,var(50) := 80,0)

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0
trigger1 = Time > 60
trigger1 = helper(100000),cond(1,var(1) := 64,0)

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0
trigger1 = Time>60
v = 9    ;fv = 10
value = 1;ifelse(p2bodydist X < 128,0,1)

[State 0, Explod]
type = Explod
trigger1 = numhelper(100000)>0
trigger1 = Time>60
anim = 6100
ID = 62001
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 200

[State 0, VarSet]
type = null
triggerall = numhelper(100000)>0
trigger1 = Time>60
trigger1 = helper(100000),cond(1,var(49) := ifelse(p2bodydist Y < 64,1000,1000),0)

[State 200, 7]
type = ChangeState
triggerall = numhelper(100000)>0
trigger1 = Time>60 && p2bodydist X < 4
trigger1 = var(9) := 1;
value = 23
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = Time>60
value = ifelse(pos y < 0,50,0)
ctrl = 1

;---------------------------------------------------------------------------
; EX-Shadow Thunder Helper
[Statedef 2051]
type = A
movetype = I
physics = N
anim = 930;954
sprpriority = 5
ctrl = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
;ignorehitpause = 
;persistent = 

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time>=0 && time%5 = 0
v = 5    ;fv = 
value = -5

[State 0, Helper]
type = Helper
trigger1 = time>=0 && time%5 = 0
helpertype = normal ;player
name = "Shadow Thunder Bolt"
ID = 2052
stateno = 2052
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>60
trigger2 = root,numtarget>0 && !root,projhit2050 = 1
trigger2 = root,var(5)<1
ignorehitpause = 1

[State 0, PosSet]
type = PosAdd
trigger1 = time>=0 && time%5 = 0
x = ifelse(enemynear,pos x<pos x,20+random%100,-(20+random%100))*-facing
y = 0

;---------------------------------------------------------------------------
; Shadow Bolt EX Helper
[Statedef 2052]
type = A
movetype = I
physics = N
anim = 930;954
sprpriority = 5
ctrl = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, Bolt (God I sure hope the Kaslier guy doesn't sue me but this effect is TOO damn good)]
type = Explod
trigger1 = time=0
anim = 10019
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.2,0.65
sprpriority = 2
shadow = 90,80,20
ownpal = 0
trans = sub
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 10011
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 2
shadow = 90,80,20
ownpal = 0
trans = sub
removeongethit = 1

  ; blue
[State 0, ]
type = Explod
triggerall = Time >= 0
;triggerall = Time <= 59
trigger1 = (Time%3) = 1
anim = 1085;881
;ID =
pos = 0,-200
postype = p1
;facing = 1
;vfacing = 1
bindtime = -1
vel = 0,0
;accel = -.008,0
random = 0,1
removetime = 5
supermove = 9999
;pausemovetime = 0
scale = .23, 4.23
sprpriority = -55
ontop = 0
;shadow = 0,0,0
;ownpal = 0
trans=sub
removeongethit = 1
;ignorehitpause = 0
;persistent = 1

[State 4233, BGPalFX]
type = BGPalFX
triggerall = Time >= 0
triggerall = Time <= 5
trigger1 = (time % 8) = 1
time = 3
time = 9999
add = -5,-100,-9
sinadd = 400,500,500,256

[State 0, EnvShake]
type = EnvShake
trigger1 = Time%15=0
time = 12
ampl = 5

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 182, 2]
type = PlaySnd
trigger1 = Time = 0
value = 7, 344

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
freq = 120
ampl = -6
phase = 90

[State 210, 2]
type = Projectile
trigger1 = time = 0
projanim = 6201
projremove = 1
projremovetime = 10
attr = A, SP
id = 2050
animtype  = Hard
damage    = 16,0
hitflag = MAFD
guardflag = MA
pausetime = 0,12
sparkno = S7000
guard.sparkno = -1
sparkxy = 0,enemy,pos y-32
hitsound   = S1,2
guardsound = S3,1
ground.type = High
ground.slidetime = 40
ground.hittime  = 40
ground.velocity = 0,-8
air.velocity = 0,-(6+enemynear,pos y/60)
air.hittime = 999
givepower = 8
getpower = 0
guard.velocity = -4
guard.slidetime = 20
fall = 1
fall.recover = 0
fall.yvelocity = -2
air.fall = 1
envshake.time = 7
envshake.ampl = 4

ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = 0,-55,-200

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[state 196, 9]
type = destroyself
trigger1 = time = 10

;---------------------------------------------------------------------------
; EX-Shadow Combo
[Statedef 2100]
type = S
movetype= I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 752

[State 0, VarAdd]
type = VarAdd
trigger1 = time=0
v = 5    ;fv = 
value = -50

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = player
name = "Shadow Clone"
ID = 2100
stateno = 2101
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 1
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.8
y = 0.8

[State 200, 7]
type = ChangeState
trigger1 = time>30
trigger1 = numHelper(2100)<1 && p2bodydist x > 320
value = 1000
ctrl = 0

[State 200, 7]
type = ChangeState
trigger1 = time>30
trigger1 = numHelper(2100)<1
value = ifelse(pos y >-1, 0, 51)
ctrl = 1

;---------------------------------------------------------------------------
; EX-Shadow Clone
[Statedef 2101]
type = S
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S5,21

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 15

[State 0, Explod]
type = Explod
trigger1 = time<10
anim = 7100
pos = 0,-48
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 24-(time*2),24-(time*2)
removetime = -2
pausemovetime = 0
scale = 0.5-(time/22.00),0.65-(time/22.00)
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  random%360
xangle = 0
yangle = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 10

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time>10
value = 1
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
type = ChangeState
trigger1 = root,numhelper(100000)>0
trigger1 = p2bodydist x < 64 && inguarddist && p2movetype != H
value = 1001
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = root,numhelper(100000)>0
trigger1 = p2bodydist x < 12
value = 200
ctrl = 0

[State 0, DestroySelf]
type = ChangeState
value = 2102
trigger1 = time>60

;---------------------------------------------------------------------------
; EX-Shadow Clone Die
[Statedef 2102]
type = S
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 752

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 0,0,0
;sinadd = 0,0,0,10
invertall = 0

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7100
pos = 0,-48
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = time*2,time*2
removetime = -2
pausemovetime = 0
scale = 0.25+(time/24.00),0.25+(time/24.00)
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  random%360
xangle = 0
yangle = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0 && ishelper(2100)
value = S5,19

[State 0, Helper]
type = Helper
trigger1 = time = 0 && ishelper(2100)
helpertype = normal
name = "Shadow Clone Die"
ID = 2102
stateno = 2102
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>10
trigger2 = ishelper(2100) = 1

;---------------------------------------------------------------------------
; Lash Hit Helper
[Statedef 2001]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100

[State 0, Turn]
type = Turn
trigger1 = time=1 && facing!=root,facing

[State 0, EnvShake]
type = EnvShake
trigger1 = (time+6)%5=0
time = 3
freq = 120
ampl = -6
phase = 90

[State 210, 2]
type = Projectile
trigger1 = (time+6)%5=0
projanim = 6100
projremove = 1
projremovetime = 1
projid = 2001
attr = A, SA
animtype  = Hard
damage    = 4,0
hitflag = MAFD
guardflag = MA
pausetime = 3,3
sparkno = -1
guard.sparkno = -1
sparkxy = 0,-32
hitsound   = S1,4
guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = facing*2
air.velocity = 2.2,-2
givepower = 11
getpower = 0
guard.velocity = -10
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 10

[State 0, Explod]
type = Explod
trigger1 = (time)%5=0 && time>5
anim = 3882
pos = 0,-32
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.2,6
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  random%360
xangle = 0
yangle = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 200, 7]
type = DestroySelf
trigger1 = time>30

;---------------------------------------------------------------------------
; Enemy stunned state
[Statedef 5600]
;type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=5300 && pos y > -33
value = 5300
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=5050 && pos y < -32
value = 5050

[State 0, PalFX]
type = PalFX
trigger1 = time%10=0
time = 10
add = 150,150,150
mul = 80,80,80
sinadd = 150,150,150,10
invertall = 1
color = 256

[State 0, SelfState]
type = SelfState
trigger1 = time>GetHitVar(hittime)+60 && pos y < -32
value = 5030
ctrl = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < -32
y = 0.50

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = GetHitVar(xvel)
y = GetHitVar(yvel)

[State 0, PosSet]
type = PosSet
trigger1 = anim = 5300
y = 0

[State 0, SelfState]
type = SelfState
trigger1 = time>200
value = 5030
ctrl = 0

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 5601]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 5602

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 5602]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, No scroll]
type = ScreenBound
triggerall = Pos y < -15
trigger1 = 1;BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit wall]
type = ChangeState
triggerall = Pos y < -12
trigger1 = BackEdgeBodyDist <= 48
trigger2 = FrontEdgeBodyDist <= 48
value = 5603

[State 1026, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 5603]
type    = A
movetype= H
physics = N

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0 && vel x < 0
x = 15 - BackEdgeBodyDist

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 5604

;------------------
; Hit by Fast Kung Fu Palm - bounce off wall
; (a custom gethit state)
[Statedef 5604]
type    = A
movetype= H
physics = N

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;---------------------------
; P2-Thrown by Face To Foot
[Statedef 5605]
type = A
physics = N
movetype = H
ctrl = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = pos y > 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim
trigger1 = time = 0 && anim!=5070
value = 5070
elem = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y > -1 && anim!=5080
statetype = C;L       ;S,A,C,L
physics = C         ;A,C,S,N

[State 820, 1]
type = ChangeAnim
trigger1 = pos y > -1 && anim!=5080
value = 5080
elem = 0

[State 0, SelfState]
type = SelfState
trigger1 = time>80
value = ifelse(alive,5120,5150)

;------------------
; Hit by Fast Kung Fu Palm - shaking from the hit
; (a custom gethit state)
; See State 1020 for details
[Statedef 5606]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1025

[State 1025, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 5607

;------------------
; Hit by Fast Kung Fu Palm - flying through the air
; (a custom gethit state)
[Statedef 5607]
type    = A
movetype= H
physics = N

[State 1026, Velocity]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, No scroll]
type = ScreenBound
triggerall = 1
trigger1 = 1;BackEdgeBodyDist < 65
;trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, Hit ground]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5605

[State 1026, Hit wall]
type = ChangeState
trigger1 = BackEdgeBodyDist <= 48
trigger2 = FrontEdgeBodyDist <= 48
value = 5608

;------------------
; Hit by Fast Kung Fu Palm - hit wall
; (a custom gethit state)
[Statedef 5608]
type    = A
movetype= H
physics = N

[State 1027, Pos]
type = PosAdd
trigger1 = Time = 0 && vel x < 0
x = 15 - BackEdgeBodyDist

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, Stop moving]
type = PosFreeze
trigger1 = time<80
x = 1
y = 1

[State 0, Gravity]
type = Gravity
trigger1 = time>=80

[State 1027, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = F72
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, Anim]
type = ChangeAnim2
trigger1 = Anim = 1027 && animtime=0
trigger2 = anim = 5606 && time<80
value = 5606
elem=0

[State 1027, Sound]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1026, Hit ground]
type = ChangeState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5605

;---------------------------------------------------------------------------
; EX Helper Effect
[Statedef 6000]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -500                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 15
freq = 60
ampl = -4
phase = 90

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 3882
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,8
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
trans = addalpha
alpha = 64,255

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6000
ID = 6000+id
pos = 0,24
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.75,0.75
sprpriority = 50
ownpal = 0
removeongethit = 0
trans = sub
yangle = 65

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6000
ID = 6001+id
pos = 0,24
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.5,0.5
sprpriority = 40
ownpal = 0
removeongethit = 0
trans = add
xangle = 25

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(6001+id)>0
ID = 6001+id
scale = 0.70+(time*0.02),0.50
xangle = 25.00-(time*0.5)
trans = add

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = NumExplod(6000+id)>0
ID = 6000+id
scale = 0.75+(time*0.05),0.75
trans = sub

[State 1240, 1]
type = PlaySnd
trigger1 = time = 0
value = 6,1;

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>80
ignorehitpause = 1
persistent = 1

;---------------------------------------------------------------------------
; MAX MODE Helper
[Statedef 7000]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -1000                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 2000

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 20    ;fv = 
value = -1

[State 0, Turn]
type = Turn
trigger1 = facing = -1

[State 0, MAX BAR]
type = Explod
trigger1 = 1
anim = 10004
ID = 10004
pos = -20,12
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = -1
removetime = 1
scale = 1,1
sprpriority = 80
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, MAX BAR]
type = Explod
trigger1 = 1
anim = 10005
ID = 10005
pos = -20,12
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = -1
removetime = 1
scale = 1,1
sprpriority = 85
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, MAX BAR EDIT]
type = ModifyExplod
trigger1 = 1
ID = 10005
scale = var(20)/2000.00,1

[State 0, MAX ON]
type = Explod
trigger1 = time=0
anim = 10003
ID = 10003
pos = -16,8
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 130
scale = 1,1
sprpriority = 100
ownpal = 1
removeongethit = 0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<20
ID = 10003
scale = 1.00,(time/20.00)
;trans = add

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>100
ID = 10003
scale = 1.00,1.00-((time-100)/30.00)
;trans = add

[State 0, Dust]
type = Explod
trigger1 = time=0
anim = 6000
pos = 0,24
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.65,0.65
sprpriority = 40
ownpal = 1
removeongethit = 0
trans = sub
xangle = 25

[State 0, Dust]
type = Explod
trigger1 = time=0
anim = 6000
pos = 0,24
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 0.65,0.65
sprpriority = 40
ownpal = 1
removeongethit = 0
trans = add
yangle = 25

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 10
freq = 60
ampl = -2
phase = 90

[State 1240, 1]
type = PlaySnd
trigger1 = time = 0
value = 6,1;

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, PalFX]
type = PalFX
trigger1 = gametime%10=0
time = 10
add = 15,15,15
sinadd = 45,0,0,10
invertall = 1
color = 256
ignorehitpause=1
supermovetime = 99999
pausemovetime = 99999

[State 0, Glowing Sparkles]
type = Explod
trigger1 = GameTime%10=0
anim = 8840
random = 26,32
pos = 0,-48
postype = p1
vel = root,vel x/3.00, 1
removetime = -2
sprpriority = -4+random%8

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,0
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(20)<1
ignorehitpause = 1
persistent = 1