;---------------------------------------------------------------------------
; Lv1-Beatdown Combo
[Statedef 3000]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 727
velset = 0,0

[State 0, ChangeAnim]
type = null;ChangeAnim
trigger1 = time=10
value = 969
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = S5,5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=30
value = 1706
elem = 1
;supermovetime = 99999
;pausemovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 9    ;fv = 10
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = time>30
x = 30

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = time=0
time = 30
sound = S7,316
pos = 0,9999
movetime = 30
darken = 0
unhittable = 1

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV1 Effect"
ID = 6100
stateno = 6100
pos = -28,-38
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 210, 2]
type = HitDef
trigger1 = time = 18
attr = A, HA
animtype  = Med
damage    = 45,2
hitflag = MAFD
guardflag = MA
pausetime = 24,75
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,5
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -10
air.velocity = -2.2,-2
givepower = 0
getpower = 0
guard.velocity = -5
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
forcestand = 1
p2getp1state = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = movehit
trigger2 = abs(target,pos x-pos x)<12
value = 30001
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit
trigger2 = NumTarget && abs(target,pos x-pos x)<12
anim = 7002
pos = 48,-24
postype = p1  ;p2,front,back,left,right
scale = 0.75,0.75
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movehit
trigger2 = NumTarget && abs(target,pos x-pos x)<16
value = 3001
ctrl = 0

[State 0, Explod]
type = Explod
trigger1 = time>30
anim = 7103
pos = 64,-36
postype = p1  ;p2,front,back,left,right
scale = 0.1,0.1
random= 24,48
vel = -20,0
sprpriority = -50
ownpal = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = time>50 && !movecontact
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Lv1-Beatdown Combo Pt2
[Statedef 3001]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 1,5
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 9    ;fv = 10
value = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time = 0
value = 30001
ignorehitpause = 1


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 200
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 220 && movehit
value = 250
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 240 && movehit
value = 220
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 210 && movehit
value = 240
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 230 && movehit
value = 210
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 200 && movehit
value = 230
elem = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1 && anim!=250
x = 6

[State 0, TargetBind]
type = TargetBind
trigger1 = anim!=250
time = 5
id = -1
pos = 38,0
ignorehitpause = 1
;persistent = 

[State 210, 2]
type = HitDef
trigger1 = AnimElem=2 && anim!=250
attr = A, HA
animtype  = Med
damage    = 21,2
hitflag = MAFD
guardflag = MA
pausetime = 0,8
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,1+random%2
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -2
air.velocity = -2.2,-2
givepower = 0
getpower = 0
guard.velocity = -5
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
forcestand = 1
fall=0
p2stateno = 30001

[State 210, 2]
type = HitDef
trigger1 = AnimElem=2 && anim=250
attr = A, HA
animtype  = Hard
damage    = 26,2
hitflag = MAFD
guardflag = MA
pausetime = 0,6
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,4
guardsound = S3,0
ground.type = High
ground.slidetime = 60
ground.hittime  = 6
ground.velocity = -16
air.velocity = -2.2,-2
givepower = 0
getpower = 0
guard.velocity = -5
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
forcestand = 1
fall=0
p2stateno = 30001

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = movehit
value = 30001
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = anim!=250
anim = 7103
pos = 0,-48
postype = p1  ;p2,front,back,left,right
scale = 0.1,0.1
random= 24,48
vel = -10,0
sprpriority = -50
ownpal = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = movehit && anim!=250
anim = 7000
pos = 28,-24
postype = p1  ;p2,front,back,left,right
scale = 1,1
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit && anim=250
time = 16
freq = 60
ampl = -4
phase = 90
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit && anim=250
anim = 7001
pos = 40,-64
postype = p1  ;p2,front,back,left,right
scale = 0.75,0.75
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = movehit
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = AnimTime>-12 && anim=250
v = 9    ;fv = 10
value = 3002

[State 0, Null]
type = Null
triggerall = numhelper(100000)>0
trigger1 = MoveHit && var(10)>0
trigger1 = helper(100000),cond(1,var(8) := 0,0)

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime>-12 && anim=250
value = 1000
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime=0 && anim!=250
value = 0
ctrl = 0

;---------------------------------------------------------------------------
; Lv1-Beatdown Combo Pt2
[Statedef 3002]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
velset = 0,0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 9    ;fv = 10
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 969
elem = 2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time = 0
value = 30001
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0 && p2dist x < 0

[State 0, VelSet]
type = VelSet
trigger1 = time>10 && AnimTime<-30
x = 6

[State 210, 2]
type = HitDef
trigger1 = time%8=0 && anim=969 && AnimTime <-26
attr = A, HA
animtype  = Hard
damage    = 17,2
hitflag = MAFD
guardflag = MA
pausetime = 0,8
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,2+random%2
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -6
air.velocity = -2.2,-2
givepower = 0
getpower = 0
guard.velocity = -5
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
forcestand = 1
fall=0
fall.recover = 0
p2stateno = 30001

[State 0, Explod]
type = Explod
trigger1 = movehit && anim=969 && AnimTime <-26
anim = 7001
random = 32,64
pos = 38,-64
postype = p1  ;p2,front,back,left,right
scale = 0.65,0.65
sprpriority = 50
ownpal = 1
ignorehitpause = 1

[State 210, 2]
type = HitDef
trigger1 = anim=969 && AnimElem = 28
attr = A, HA
animtype  = Hard
damage    = 32,2
hitflag = MAFD
guardflag = MA
pausetime = 7,26
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
hitsound   = S1,4
guardsound = S3,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = -8,-6
air.velocity = -2.2,-2
givepower = 0
getpower = 0
guard.velocity = -5
guard.slidetime = 20
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
fall=1
fall.recover = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = anim=969 && AnimElem = 28
time = 16
freq = 60
ampl = -4
phase = 90
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = anim=969 && AnimElem = 28
anim = 7002
random = 32,64
pos = 32,-58
postype = p1  ;p2,front,back,left,right
scale = 0.75,0.75
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, MoveHitReset]
type = MoveHitReset
trigger1 = movehit && anim=969
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime>-12 && anim=969
value = 3003
ctrl = 0


;---------------------------------------------------------------------------
; Lv1-Beatdown Combo Pt3
[Statedef 3003]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 30                  ;Set layering priority to 2 (in front)
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1007
elem = 1

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7101
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/200.00,3
accel = 0,0
random = 48,32
removetime = -2
pausemovetime = 0
scale = 0.1,0.1
sprpriority = -20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = 1
anim = 7101
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/800.00,4
accel = 0,0
random = 48,32
removetime = -2
pausemovetime = 0
scale = 0.1,0.1
sprpriority = -20
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Helper]
type = Helper
trigger1 = (time+4)%12=0 && time>12 && time<70
helpertype = normal ;player
name = "Lightning"
ID = 3004
stateno = 3004
pos = 160-time,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
trigger1 = (time)%12=0 && time>12 && time<70
helpertype = normal ;player
name = "Lightning"
ID = 3005
stateno = 3004
pos = -160+time,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, VelSet]
type = VelSet
trigger1 = time>13 && time<18
x = 0
y = -10

[State 182, 2]
type = PlaySnd
trigger1 = Time = 18
value = 7, 348;304;55;330

[State 0, Explod]
type = Explod
trigger1 = time>18 && time<80
anim = 7101
pos = 26,-62
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/3000.00,-2
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.05,0.05
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>18 && time<80
anim = 7101
pos = -32,-54
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (500-random%1000)/3000.00,-2
accel = 0,0
random = 8,8
removetime = -2
pausemovetime = 0
scale = 0.05,0.05
sprpriority = 60
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
angle = random%360

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 5

[State 182, 2]
type = PlaySnd
trigger1 = Time = 1
value = 7,344;8, 85;55;330

[State 0, VelMul]
type = VelMul
trigger1 = 1
y = 0.85

[State 0, Helper]
type = Helper
trigger1 = time=80
helpertype = normal ;player
name = "Big Boom"
ID = 3005
stateno = 3005
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=80
value = 1704
elem = 1

[State 0, Explod]
type = Explod
trigger1 = time>160 && numhelper(100000)>0
anim = 6100
ID = 70000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = 120

[State 0, ChangeState]
type = ChangeState
trigger1 = time>160
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; BIG BaBoomm Helper
[Statedef 3005]
type = A
movetype = I
physics = N
anim = 930;954
juggle = 999999
sprpriority = 5
ctrl = 0
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = nojugglecheck


[State 0, EnvColor]
type = EnvColor
trigger1 = time=0
value = 0,0,0
time = 3
under = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 16
freq = 60
ampl = -8
phase = 90

[State 0, EnvShake]
type = EnvShake
trigger1 = time=16
time = 12
freq = 60
ampl = -4
phase = 90

[State 0, ]
type = Explod
trigger1 = Time < 20 && time%2=0
anim = 6200;881
ID = 3005
pos = 0,-200
postype = p1
facing = ifelse(random%1000<500,-1,1)
vfacing = 1
bindtime = 0
vel = (random%1000)/750.00,0
;accel = -.008,0
random = 64,1
removetime = -1
supermove = 9999
;pausemovetime = 0
scale = 2, 2
sprpriority = 50-random%40
ontop = 0
;shadow = 0,0,0
ownpal = 0
trans=sub
removeongethit = 1
angle=(15-random%30)

[State 0, ]
type = Explod
trigger1 = Time < 20 && (time+1)%2=0
anim = 6200;881
ID = 3005
pos = 0,-200
postype = p1
facing = ifelse(random%1000<500,-1,1)
vfacing = 1
bindtime = 0
vel = -((random%1000)/750.00),0
;accel = -.008,0
random = 64,1
removetime = -1
supermove = 9999
;pausemovetime = 0
scale = 2, 2
sprpriority = 10-random%40
ontop = 0
;shadow = 0,0,0
ownpal = 0
trans=sub
removeongethit = 1
angle=(15-random%30)

[State 0, PalFX]
type = PalFX
trigger1 = time>30
time = 1
add = 0,0,0
mul = floor(256-((time-30)/50.00)*256.00),floor(256-((time-30)/50.00)*256.00),floor(256-((time-30)/50.00)*256.00)
invertall = 0
color = 256

[State 4233, BGPalFX]
type = BGPalFX
triggerall = random%60>time
trigger1 = 1
time = 3
time = 9999
add = -15,-255,-25
sinadd = 400,500,500,256

[State 0, EnvShake]
type = EnvShake
trigger1 = Time%15=0
time = 12
ampl = 5

[State 0, PosSet]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 182, 2]
type = PlaySnd
trigger1 = Time = 0
value = 5, 13

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
freq = 120
ampl = -6
phase = 90

[State 210, 2]
type = Projectile
trigger1 = time=0
projanim = 6202
projremove = 1
projremovetime = 5
projid = 2001
attr = A, HA
animtype  = Hard
damage    = 18,3
hitflag = MAFD
guardflag = U
pausetime = 0,40
sparkno = S7000
sparkxy = -9999,0
guard.sparkno = -1
hitsound   = S7,67
guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing,-12
air.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing,-12
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = 200,55,0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time >= 80
ID = 3005

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[state 196, 9]
type = destroyself
trigger1 = time = 80


;---------------------------------------------------------------------------
; Side Bolt Helper
[Statedef 3004]
type = A
movetype = I
physics = N
anim = 930;954
sprpriority = 5
ctrl = 0
velset = 0,0

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 10011
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 2
shadow = 90,80,20
ownpal = 1
trans = sub

[State 0, Turn]
type = Turn
trigger1 = id = 3005 && time=0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub

  ; blue
[State 0, ]
type = Explod
triggerall = Time >= 0
;triggerall = Time <= 59
trigger1 = (Time%3) = 1
anim = 1085;881
;ID =
pos = 0,-200
postype = p1
;facing = 1
;vfacing = 1
bindtime = -1
vel = 0,0
;accel = -.008,0
random = 0,1
removetime = 5
supermove = 9999
;pausemovetime = 0
scale = .23, 4.23
sprpriority = -55
ontop = 0
;shadow = 0,0,0
;ownpal = 0
trans=sub
removeongethit = 1
;ignorehitpause = 0
;persistent = 1

[State 4233, BGPalFX]
type = BGPalFX
triggerall = Time >= 0
triggerall = Time <= 5
trigger1 = (time % 8) = 1
time = 3
time = 9999
add = -15,-255,-25
sinadd = 400,500,500,256

[State 0, EnvShake]
type = EnvShake
trigger1 = Time%15=0
time = 12
ampl = 5

[State 0, PosSet]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 182, 2]
type = PlaySnd
trigger1 = Time = 0
value = 7, 344

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
freq = 120
ampl = -6
phase = 90

[State 210, 2]
type = Projectile
trigger1 = time%3 = 0
projanim = 6201
projremove = 1
projremovetime = 2
projid = 2001
attr = A, HA
animtype  = Hard
damage    = 18,3
hitflag = MAFD
guardflag = U
pausetime = 0,0
sparkno = S7000
guard.sparkno = -1
sparkxy = 0,enemy,pos y-32
hitsound   = S1,4
guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = ifelse(root,pos x-pos x>0,-16,16)*facing,-4
air.velocity = ifelse(root,pos x-pos x>0,-16,16)*facing,-4
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = 0,-55,-200

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[state 196, 9]
type = destroyself
trigger1 = time = 20

;---------------------------------------------------------------------------
; Enemy Hyper stunned state
[Statedef 30001]
type    = S                      ;State-type: S-stand, C-crouch, A-air, L-liedown
movetype= H                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = (anim < 5000 || anim > 5015) && time=0
value = 5010
elem = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !HitOver && GetHitVar(animtype)=0
value = 5010
elem = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !HitOver && GetHitVar(animtype)=1
value = 5011
elem = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !HitOver && GetHitVar(animtype)=2
value = 5012
elem = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = HitOver
x = GetHitVar(xvel)*facing
y = 0
persistent=0

[State 0, SelfState]
type = SelfState
trigger1 = HitOver && time>60
trigger1 = AnimTime=0
value = 5030
ctrl = 0

;---------------------------------------------------------------------------
; Lv1-Ground Beam Hyper
[Statedef 3050]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 733
velset = 0,0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>=30 && time%30=0
trigger2 = time = 30
time = 30
add = 0,0,0
mul = 160,160,160
sinadd = 50,50,50,30
;invertall = 0
color = 100
supermovetime = 99999
pausemovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 5
ignorehitpause = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time=0
time = 30
sound = S7,312
pos = 0,9999
movetime = 20
darken = 0
unhittable = 1

[State 0, Helper]
type = Helper
trigger1 = time=10
helpertype = normal ;player
name = "Hyper LV1 Effect"
ID = 6100
stateno = 6100
pos = -24,-92
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animtime=-54 && anim = 733
value = 733
elem = 7
supermovetime = 99999
pausemovetime = 99999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time>=30 && time%10=0
time = 10
freq = 60
ampl = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S7,145

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S5,16

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=30
value = S7,131

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=30
value = S5,15

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=30
value = S5,14

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=40
value = S1,173

[State 0, EnvColor]
type = EnvColor
trigger1 = time = 30
value = 255,255,255
time = 4

[State 210, 2]
type = Projectile
trigger1 = time%3 = 0 && time>=30
projanim = 6203
projremove = 1
projremovetime = 2
offset = 18,0
projid = 2001
;id = 3050
attr = A, HA
animtype  = Up
damage    = 8,1
hitflag = MAFD
guardflag = U
pausetime = 0,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
;hitsound   = S1,4
;guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = 0,-2
air.velocity = 0,-2
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 30
palfx.add = -100,-100,-100
palfx.sinadd = 80,80,80,10


[State 0, starting explod]
type = Explod
trigger1 = time>30 && time<40
anim = 7101
pos = 18,0
random=64,42
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
random= 24,24
vel = 2+random%24,0
sprpriority = 5
ownpal = 1
trans=sub
angle=random%360
xangle=70

[State 0, starting explod]
type = Explod
trigger1 = time>30 && time<40
anim = 7101
pos = 18,0
random=64,42
postype = p1  ;p2,front,back,left,right
scale = 0.5,0.5
random= 24,24
vel = -2-random%24,0
sprpriority = 5
ownpal = 1
trans=sub
angle=random%360
xangle=70

[State 0, white streaks]
type = Explod
trigger1 = time>30
anim = 7101
pos = 18,32
random=100,24
postype = p1  ;p2,front,back,left,right
scale = 0.8,0.8
random= 24,48
vel = 0,-32
sprpriority = 5-random%10
ownpal = 1
yangle=ifelse(random%1000<500,70,-70)
angle=random%360

[State 0, white streaks]
type = Explod
trigger1 = time>30
anim = 7100
pos = 18,32
random=100,64
postype = p1  ;p2,front,back,left,right
scale = 0.8,0.8
random= 24,48
vel = 0,-58
sprpriority = 5-random%10
ownpal = 1
yangle=ifelse(random%1000<500,70,-70)
angle=random%360

[State 0, black parts in beam]
type = Explod
trigger1 = time>30
anim = 7100
pos = 18,-96
random=72,240
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.25
random= 24,48
vel = 0,-6
sprpriority = 15-random%12
ownpal = 1
trans=sub
yangle=ifelse(random%1000<500,50,-50)
angle=random%360

[State 0, black parts at bottom]
type = Explod
trigger1 = time>30
anim = 7101
pos = 18,0
random=64,42
facing = ifelse(random%1000<500,-1,1)
vfacing = ifelse(random%1000<500,-1,1)
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.25
random= 24,24
vel = -2-random%6,0
sprpriority = -5+random%20
ownpal = 1
trans=sub
angle=random%360
xangle=70

[State 0, black parts at bottom]
type = Explod
trigger1 = time>30
anim = 7101
pos = 18,0
random=64,42
facing = ifelse(random%1000<500,-1,1)
vfacing = ifelse(random%1000<500,-1,1)
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.25
random= 24,24
vel = 2+random%6,0
sprpriority = -5+random%20
ownpal = 1
trans=sub
angle=random%360
xangle=70

[State 0, ChangeState]
type = ChangeState
trigger1 = time>200
value = 3051
ctrl = 0

;---------------------------------------------------------------------------
; Lv1-Ground Beam End
[Statedef 3051]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
velset = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = animtime=0 && anim = 733
value = 825
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Ground Pound Finish"
ID = 3052
stateno = 3052
pos = 16,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 70
value = 12
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S7,103

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S7,120

[State 0, VarSet]
type = VarSet
triggerall = numhelper(100000)>0 && random<800 && power>1500
trigger1 = var(10)>0
v = 9    ;fv = 10
value = 620

[State 0, Null]
type = Null
triggerall = numhelper(100000)>0 && var(9) = 620
trigger1 = var(10)>0
trigger1 = helper(100000),cond(1,var(8) := 0,0)

[State 0, ChangeState]
type = ChangeState
triggerall = numhelper(100000)>0 && var(9) = 620
trigger1 = animtime = 0 && anim = 12
value = 1000
ctrl = 0

[State 0, ChangeState]
type = ChangeState
triggerall = numhelper(100000)>0 && var(9) != 620
trigger1 = animtime = 0 && anim = 12
value = 1962
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0 && anim = 12
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Lv1-Ground Beam Finish Helper
[Statedef 3052]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 7103
velset = 0,0

[State 210, 2]
type = Projectile
trigger1 = time=0
projanim = 6202
projremove = 1
projremovetime = 3
offset = 18,0
projid = 2001
id = 3050
attr = A, HA
animtype  = Up
damage    = 60,8
hitflag = MAFD
guardflag = U
pausetime = 0,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
;hitsound   = S1,4
;guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = enemynear,facing*2,-20
air.velocity = enemynear,facing*2,-20
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 160
palfx.add = -100,-100,-100
palfx.sinadd = 80,80,80,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S7,131

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S5,14

[State 0, EnvColor]
type = EnvColor
trigger1 = time = 0
value = 255,255,255
time = 8

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 16
freq = 60
ampl = -8

[State 0, EnvShake]
type = EnvShake
trigger1 = time=16
time = 16
freq = 60
ampl = -4

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
mul = floor(256.00-((time/120.00)*256.00)),floor(256.00-((time/120.00)*256.00)),floor(256.00-((time/120.00)*256.00))
invertall = 0
color = 256

[State 0, white streaks]
type = Explod
trigger1 = random%40>time
anim = 7100
pos = 0,-32
random=100,64
postype = p1  ;p2,front,back,left,right
scale = 2,2
random= 24,48
vel = 0,-12
sprpriority = 5-random%10
ownpal = 0
yangle=ifelse(random%1000<500,70,-70)
angle=random%360

[State 0, black explosion streaks]
type = Explod
trigger1 = random%20>time
anim = 7100
pos = 0,-128
random=24,64
facing = ifelse(random%1000<500,-1,1)
vfacing = ifelse(random%1000<500,-1,1)
postype = p1  ;p2,front,back,left,right
scale = 1.5,1.5
random=24,48
vel = 0,0
sprpriority = 10-random%10
ownpal = 0
trans = sub
yangle=70
angle=random%360

[State 0, black explosion streaks]
type = Explod
trigger1 = random%20>time
anim = 7100
pos = 0,-64
random=24,64
facing = ifelse(random%1000<500,-1,1)
vfacing = ifelse(random%1000<500,-1,1)
postype = p1  ;p2,front,back,left,right
scale = 1.5,1.5
random=24,48
vel = 0,0
sprpriority = 10-random%10
ownpal = 0
trans = sub
yangle=70
angle=random%360

[State 0, black explosion streaks]
type = Explod
trigger1 = random%20>time
anim = 7100
pos = 0,0
random=24,64
facing = ifelse(random%1000<500,-1,1)
vfacing = ifelse(random%1000<500,-1,1)
postype = p1  ;p2,front,back,left,right
scale = 1.5,1.5
random=24,48
vel = 0,0
sprpriority = 10-random%10
ownpal = 0
trans = sub
yangle=70
angle=random%360

[State 0, black parts in beam]
type = Explod
trigger1 = random%100>time
anim = 7101
pos = 0,-96
random=72,240
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.25
random= 24,48
vel = 0,-6
sprpriority = 15-random%12
ownpal = 0
trans=sub
yangle=ifelse(random%1000<500,50,-50)
angle=random%360

[State 0, black parts in beam]
type = Explod
trigger1 = random%100>time
anim = 7101
pos = 0,-96
random=72,240
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.25
random= 24,48
vel = 0,-6
sprpriority = 15-random%12
ownpal = 0
trans=sub
yangle=ifelse(random%1000<500,50,-50)
angle=random%360


[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 120
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
; Lv1-Dark God's Blessing
[Statedef 3100]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1088
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%6=0 && time<90
time = 6
freq = 60
ampl = -4
phase = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = time=0
time = 80
sound = S7,307
pos = 0,9999
movetime = 80
darken = 0
unhittable = 1

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV2 Effect"
ID = 6100
stateno = 6100
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Dark Blessing"
ID = 3101
stateno = 3101
pos = 26,-42
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S5,1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=60
value = S5,23
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=1
value = S5,24
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=30
value = S7,328
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=80
value = S5,22
supermovetime = 99999
pausemovetime = 99999

[State 200, 7]
type = ChangeState
trigger1 = Time>150
value = ifelse(pos y < 0,50,0)
ctrl = 1
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Dark Blessing Helper
[Statedef 3101]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = time<150
v = 1    ;fv = 10
value = 1800+ifelse(root,fvar(30)>999,3600,0)

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 1    ;fv = 
value = -1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermovetime = 99999
pausemovetime = 99999

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,stateno != [3310,3311]
time = 1
facing = 0
pos = 0,-root,pos y

[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,stateno = [3310,3311]
time = 1
facing = 0
pos = 9000,0

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time < 20
time = 1
add = floor(200.00*(time/20.00)),floor(200.00*(time/20.00)),floor(200.00*(time/20.00))

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time >= 20 && time <= 90
time = 1
add = 200,200,200

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time > 90 && time<150
time = 1
add = 200-floor(200.00*((time-90)/60.00)),200-floor(200.00*((time-90)/60.00)),200-floor(200.00*((time-60)/90.00))

[State 0, PalFX]
type = PalFX
trigger1 = time<100
time = 1
add = 0,0,0
mul = floor(((time)/100.00)*150.00),floor(((time)/100.00)*250.00),floor(((time)/100.00)*150.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause = 
;persistent = 

[State 0, PalFX]
type = PalFX
trigger1 = time>=100
trigger1 = var(1)>=90
time = 1
add = 0,0,0
mul = 150,250,150
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = var(1)<90
time = 1
add = 0,0,0
mul = floor((var(1)/90.00)*150.00),floor((var(1)/90.00)*250.00),floor((var(1)/90.00)*150.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<90
id = 3101
scale = (time)/120.00,(time)/90.00
trans=sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<120
id = 3102
scale = (time)/320.00,(time)/320.00
trans=sub

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 10013
id = 3102
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 10014
id = 3102
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = -20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time<90 && time%10=0
anim = 10013
id = 3101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-(time*0.075)
accel = 0,0
random = 0,0
removetime = 60
pausemovetime = 0
scale = 1.00,1
sprpriority = 20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time<90 && time%10=0
anim = 10014
id = 3101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-(time*0.075)
accel = 0,0
random = 0,0
removetime = 60
pausemovetime = 0
scale = 1.00,1
sprpriority = -20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
id = 10013
anim = 10012
pos = 0,-480
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1.5
sprpriority = 40
ontop = 0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 100,255
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time = 50
helpertype = normal ;player
name = "Shadow Light Beam"
ID = 3102
stateno = 3102
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
id = 3101

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
id = 3102

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
id = 10013

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(1)<1
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Dark Blessing Helper 2
[Statedef 3102]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,numhelper(3101)<1
id = 10012

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,numhelper(3101)<1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
flag2 = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermovetime = 99999
pausemovetime = 99999

[State 0, BindToRoot]
type = BindToParent
trigger1 = 1
time = 1
facing = 0
pos = 0,0

[State 0, PalFX]
type = PalFX
trigger1 = time<120
time = 1
add = 0,0,0
mul = floor(((time)/120.00)*25.00),floor(((time)/120.00)*50.00),floor(((time)/120.00)*25.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=120
trigger1 = parent,var(1)>=90
time = 1
add = 0,0,0
mul = 25,50,25
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = parent,var(1)<90
time = 1
add = 0,0,0
mul = floor((parent,var(1)/90.00)*25.00),floor((parent,var(1)/90.00)*50.00),floor((parent,var(1)/90.00)*25.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time<3
id = 10012
anim = 10012
pos = 0,-320
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 80
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Lv1-Shade Avalanche
[Statedef 3150]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = S                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 969
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1

[State 0, VelSet]
type = VelSet
trigger1 = time<30
x = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = S5,5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time= 40
value = 21
elem = 1

[State 0, Helper]
type = Helper
trigger1 = time=0
helpertype = normal ;player
name = "Shadow Effect"
ID = 3151
stateno = 3151
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=280
value = 969
elem = 28

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 999999
pausemovetime = 999999

[State 0, SuperPause]
type = SuperPause
trigger1 = time=0
time = 30
sound = S7,304
pos = 0,9999
movetime = 30
darken = 0
poweradd = 1000
unhittable = 1

[State 0, Explod]
type = Explod
trigger1 = (time>20 && time<45) || anim!=969
anim = 10015
pos = -8,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
random = 0,0
scale = 0.1,0.1
sprpriority = 350
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 120,255
supermovetime = 99999
pausemovetime = 99999
angle = 10-random%20

[State 0, Explod]
type = Explod
trigger1 = (time>20 && time<45) || anim!=969
anim = 10015
pos = -8,-68
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = (random%1000)/250.00,0
removetime = -2
pausemovetime = 0
random = 0,0
scale = 0.05,0.05
sprpriority = 320
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
trans = addalpha
alpha = 120,255
supermovetime = 99999
pausemovetime = 99999
angle = 20-random%40

[State 0, PalFX]
type = PalFX
trigger1 = time<30
time = 1
add = 0,0,0
mul = floor(255-(time*(255/30.00))),floor(255-(time*(255/30.00))),floor(255-(time*(255/30.00)))
;sinadd = 0,0,0,10
invertall = 0
color = 256
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time<30
time = 1
add = 0,0,0
mul = 255-floor(((-animtime)*(255/30.00))),255-floor(((-animtime)*(255/30.00))),255-floor(((-animtime)*(255/30.00)))
;sinadd = 0,0,0,10
invertall = 0
color = 256
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time>=30
time = 1
add = 0,0,0
mul = 0,0,0
invertall = 0
color = 256
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV1 Effect"
ID = 6100
stateno = 6100
pos = -28,-38
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 969 && animtime=0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Shade Avalanche Helper
[Statedef 3151]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 10009
velset = 0,0

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = floor(var(1)*(255.00/100.00)),floor(var(1)*(255.00/100.00)),floor(var(1)*(255.00/100.00))
invertall = 0
color = 0
supermovetime = 999999
pausemovetime = 999999

[State 0, Explod]
type = Explod
trigger1 = time>0 && random%150<time
anim = 7103
id = 5151
pos = random%160,random%240
postype = back  ;p2,front,back,left,right
scale = 0.9,0.5
random= 320,240
vel = 15+random%10,0
sprpriority = 250
ownpal = 0
trans = addalpha
alpha = 50,255
supermovetime = 999999
pausemovetime = 999999

[State 0, Explod]
type = Explod
trigger1 = time<3
anim = 10008
id = 5151
pos = -240,0
random = 120,60
postype = back  ;p2,front,back,left,right
scale = 3,3
removetime=-1
bindtime = 999
scale = 3,3
angle = random%40
sprpriority = time*100
ownpal = 0
trans = addalpha
alpha = 255,255
supermovetime = 999999
pausemovetime = 999999

[State 0, Explod]
type = Explod
trigger1 = time<3
anim = 10008
id = 5151
pos = -240,240
random = 120,60
vfacing = -1
postype = back  ;p2,front,back,left,right
scale = 3,3
removetime=-1
bindtime = 999
scale = 3,3
angle = random%40
sprpriority = time*100
ownpal = 0
trans = sub
alpha = 255,255
supermovetime = 999999
pausemovetime = 999999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%60=0
value = S7,352
volumescale = 100
channel = -1
freqmul = 2.0
supermovetime = 999999
pausemovetime = 999999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%4=0
time = 4
freq = 20
ampl = -2
phase = 90
supermovetime = 999999
pausemovetime = 999999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
supermovetime = 999999
pausemovetime = 999999

[State 210, 2]
type = Projectile
trigger1 = var(1)>60 && time%8=0
attr = A, HA
animtype  = Med
projid = 2050
id = 3050
projanim = 10009
projscale = 1,1
projremove = 1
projremovetime = 1
projpriority = 1
projsprpriority = 3
projedgebound = 40
projstagebound = 40
projheightbound = -240
damage    = 4,2
hitflag = MAFD
;guardflag = MA
pausetime = 0,6
sparkno = -1
guard.sparkno = 40 
sparkxy = -10,-42
ground.type = High
ground.slidetime = 180
ground.hittime  = 180
ground.velocity = -1.5
air.velocity = -2.5,3.8
air.hittime  = 180
givepower = -20
getpower = 0
guard.slidetime = 280
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
supermovetime = 999999
pausemovetime = 999999

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = var(1)>60 && parent,var(5)>0
v = 5    ;fv = 
value = -1
supermovetime = 999999
pausemovetime = 999999

[State 0, VarAdd]
type = VarAdd
trigger1 = time<50
v = 1
value = 2
supermovetime = 999999
pausemovetime = 999999

[State 0, VarAdd]
type = VarAdd
trigger1 = time>250
v = 1
value = -1
supermovetime = 999999
pausemovetime = 999999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<0
id = 5151
supermovetime = 999999
pausemovetime = 999999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(1)<0
supermovetime = 999999
pausemovetime = 999999

;---------------------------------------------------------------------------
; Lv2-Poison Gas Ball
[Statedef 3200]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 20                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 752
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time>92 && anim!=1704
value = 1704
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S5,11
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%6=0 && time<90
time = 6
freq = 60
ampl = -4
phase = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = time=0
time = 80
sound = S7,305
pos = 0,9999
movetime = 80
darken = 0
unhittable = 1

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV2 Effect"
ID = 6200
stateno = 6200
pos = 19,-39
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Gas Ball"
ID = 3201
stateno = 3201
pos = 26,-42
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10000
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
;ignorehitpause =
trans = sub
angle =  0
xangle = 0
yangle = 0
supermovetime = 99999
pausemovetime = 99999

[State 200, 7]
type = ChangeState
trigger1 = Time>120
value = ifelse(pos y < 0,50,0)
ctrl = 1
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Poison Gas Ball Helper
[Statedef 3201]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermovetime = 99999
pausemovetime = 99999

[State 0, PosAdd]
type = PosAdd
trigger1 = time>92
x = ifelse(time<98,-3,0)
supermovetime = 99999
pausemovetime = 99999

[State 0, VelSet]
type = VelSet
trigger1 = time < 100 && time>92
y = -6

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.97
y = 0.97
supermovetime = 99999
pausemovetime = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time < 20
time = 1
add = floor(-65.00*(time/20.00)),floor(-255.00*(time/20.00)),floor(-65.00*(time/20.00))

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time >= 20 && time <= 90
time = 1
add = -65,-255,-65

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time > 90 && time<140
time = 1
add = -65+floor(65.00*((time-90)/50.00)),-255+floor(255.00*((time-90)/50.00)),-65+floor(65.00*((time-90)/50.00))

[State 0, PalFX]
type = PalFX
trigger1 = time>60 && time<90
time = 1
add = 0,0,0
mul = floor(256.00-((time-60)/30.00)*256.00),floor(256-((time-60)/30.00)*256.00),floor(256-((time-60)/30.00)*256.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause = 
;persistent = 

[State 0, PalFX]
type = PalFX
trigger1 = time>=120
time = 1
add = 0,0,0
mul = 0,0,0
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time=70
anim = 953
id = 3201
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 99999
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 30
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<90
id = 3201
scale = (time-70)/20.00,(time-70)/20.00
trans=sub

[State 0, Explod]
type = Explod
trigger1 = time<70 && time%10=0
anim = 10010
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 20
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
angle = random%360
supermovetime = 99999
pausemovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>200
id = 3201
;ignorehitpause = 
;persistent = 

[State 0, DestroySelf]
type = ChangeState
trigger1 = time>200
value = 3202
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Poison Gas Ball Explosion Helper
[Statedef 3202]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = 0                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=1
value = S5,12

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=60
value = S5,29;12

[State 0, PalFX]
type = PalFX
trigger1 = time<60
time = 1
add = 0,0,0
mul = floor(128.00-(time/60.00)*128.00),floor(256.00-(time/60.00)*256.00),floor(128.00-(time/60.00)*128.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause = 
;persistent = 

[State 0, PalFX]
type = PalFX
trigger1 = time>=60
time = 1
add = 0,0,0
mul = 0,0,0
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = time<62
anim = 7101
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = ((random%1000)/500.00)+0.150+time/5.00,((random%1000)/500.00)+0.150+time/5.00
sprpriority = 150
ontop = 1
ownpal = 0
removeongethit = 0
trans = sub
angle = random%360

[State 0, Helper]
type = Helper
trigger1 = time=30
helpertype = normal ;player
name = "Poison Cloud"
ID = 3203
stateno = 3203
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>80
ignorehitpause = 1
persistent = 1

;---------------------------------------------------------------------------
; Poison Gas Cloud Helper
[Statedef 3203]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 10009

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 1    ;fv = 10
value = 60*ifelse(root,fvar(30)>999,60,20)

[State 0, VarAdd]
type = VarAdd
trigger1 = 1 && root,fvar(30)<1000
v = 1    ;fv = 
value = -1

[State 0, VarAdd]
type = VarAdd
trigger1 = 1 && root,fvar(30)>999
v = 1    ;fv = 
value = -1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 4000, 5]
type = projectile
trigger1 = time%8=0 && !root,NumTarget(8211)
trigger1 = numhelper(3205)>0 && helper(3205),numtarget<1
ProjID = 8211
projanim = 10009
offset = 64,64
postype = left         ;p2,front,back,left,right
projscale = 1,1
projremove = 1
projremovetime = 8
persistent = 2
attr = S, SP
animtype  = Hard
damage    = 0, 0
persistent = 1
guardflag = MA
getpower = 0
givepower = 0
hitflag = MA
pausetime = 0,10
sparkno = -1
sparkxy = -1
hitsound   = -1
hitonce = 1
guardsound = -1
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
id = 8211
guard.velocity = 0
guard.hittime = 0
guard.slidetime = 0
airguard.velocity = 0,0
guard.kill = 0
guard.dist = 0
p2stateno = 3204
kill=0

[State 0, TargetState]
type = TargetState
triggerall = root,NumTarget(8211)
trigger1 = 1
value = 3204
ID = 8211

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999

[State 0, PalFX]
type = PalFX
trigger1 = var(1)<150
time = 1
add = 0,0,0
mul = floor((var(1)/150.00)*256.00),floor((var(1)/150.00)*256.00),floor((var(1)/150.00)*256.00)
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7102
id = 7102
pos = 0,0
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = -50
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub

[State 0, Helper]
type = Helper
trigger1 = time=0
helpertype = normal ;player
name = "Poison Watcher"
ID = 3205
stateno = 3205
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(1)<1
trigger2 = helper(3205),stateno = 3402
id = 7102

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(1)<1
;ignorehitpause = 
;persistent = 

;-------------------------------------------------------
;P2 Poisoning State (From Red Queen)
[statedef 3204]
type = U
Movetype = H
physics = U
;velset = 0,0

[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = S || statetype = C
statetype = S
physics = S
ignorehitpause = 1

[State 4020, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = statetype = A || statetype = L
statetype = A
physics = A
ignorehitpause = 1

[State 4020, 1]
type = ChangeAnim2
;trigger1 = !time
trigger1 = !hitshakeover
value = 1705
ignorehitpause = 1

[State 0, HitVelSet]
type = hitVelSet
trigger1 = !time
x = 1
y = 1
ignorehitpause = 1

[State 4020, PosSet]
type = Posfreeze
trigger1 = 1
ignorehitpause = 1

[state 4020, color]
type = palFX
trigger1 = 1
time = 10
mul = 120,0,120

[State 5000, 1]
Type = HitDef
Trigger1 = Time = 0
Attr = C, NP
Damage = 0
Priority = 1, Hit
HitFlag = F-
PauseTime = 0,0
SparkNo = -1
Guard.SparkNo = -1
;Ground.SlideTime = 0
Ground.HitTime = 9
;Ground.Velocity = 0
;Guard.Velocity = 0
;Air.Velocity = 0,0
kill=0

[State 4020, 2]
type = ChangeAnim
trigger1 = HitShakeOver
value = ifelse(statetype = A,5030,5010)
ignorehitpause = 1

[State 4020, 6]
type = SelfState
trigger1 = HitShakeOver
value = ifelse(statetype = A,5030,5001)
ignorehitpause = 1

;------------------------------------------------------------
;Poisoning helper (From Red Queen)
[statedef 3205]
type = A
Movetype = I
physics = N
velset = 0,0
anim = 10009

[State 0, Reversal]
Type = ReversalDef
Trigger1 = Time = 0
Reversal.Attr = C,NP
PauseTime = 0,0
SparkNo = -1
NumHits = 0

[State 0, posset]
type = posset
trigger1 = time >= 1
x = enemy,pos x
y = enemy,pos y

[State 0, LifeAdd]
type = targetLifeAdd
trigger1 = time%8=0 && Helper(3203),var(1)>150
value = -3
kill = 0
absolute = 1
persistent = 5

[State 0, LifeAdd]
type = targetPowerAdd
trigger1 = time%15=0 && Helper(3203),var(1)>150
value = -8
persistent = 5

[State 0, ChangeState]
type = ChangeState
trigger1 = root,stateno = 3400 && root,time>40
value = 3402

[state 4005, 1]
type = destroyself
trigger1 = NumHelper(3203) = 0

;---------------------------------------------------------------------------
;Dark God's Wrath - Attempt
[Statedef 3300]
type    = C
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1702
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time=1
value = 1000

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV2 Effect"
ID = 6200
stateno = 6200
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time<40
value = 1702
elem = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = time=1
time = 40
sound = S7,369
pos = 0,9999
movetime = 40
darken = 0
unhittable = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=43
value = S7,213
channel = -1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 32
y = 0
persistent=0

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = C, HT          ;Attributes: Standing, Normal Throw
hitflag = MAFD          ;Affect only ground people who are not being hit
guardflag = U
priority = 1, Miss    ;Throw has low priority, must be miss or dodge type.
sparkno = -1      
sparkxy = -5, -73
sprpriority = 1       ;Draw in front of p2
;p1facing = ifelse (command = "holdfwd", -1, 1) ;Turn if holding forwards
p2facing = 1          ;Force p2 to face KFM
p1stateno = 3310      
p2stateno = 1021       
fall = 1              ;Force p2 into falling down
fall.recover = 0
ground.velocity = -20,-8
air.velocity = -20,-8
fall = 1
fall.recover = 0

[State 0, TargetState]
type = TargetState
trigger1 = numtarget > 0 && abs(target,pos x-pos x)<16
value = 1021
ID = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = numtarget > 0 && abs(target,pos x-pos x)<16
value = 3310
ctrl = 0

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Dark God's Wrath Grapple
[Statedef 3310]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 100
ctrl = 0
anim = 1700
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2 && anim=1700
value = S1,8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 70
value = S5,16

[State 0, Explod]
type = Explod
trigger1 = animelem = 2 && anim=1700
anim = 7003
pos = 32,-50
postype = p1  ;p2,front,back,left,right
scale = 0.65,0.65
sprpriority = 50
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, PalFX]
type = PalFX
trigger1 = time<60
time = 1
add = 0,0,0
mul = 256-floor((time*256)/60),256-floor((time*256)/60),256-floor((time*256)/60)
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=60
time = 1
add = 0,0,0
mul = 0,0,0
;sinadd = 0,0,0,10
invertall = 0
color = 256
;ignorehitpause = 
;persistent = 

[State 0, Explod]
type = Explod
trigger1 = 1 && time<90
anim = 7101
pos = 0,16
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-5
accel = 0,0
random = 64,32
removetime = -2
pausemovetime = 0
scale = time/120.00,time/120.00
sprpriority = 500
ontop = 0
trans = add
shadow = 0,0,0
ownpal = 1
removeongethit = 0
angle = random%360

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time>90
flag = invisible

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time<100
time = 1
add = floor((time*256)/100),floor((time*256)/100),floor((time*256)/100)

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>=100
time = 1
add = 256,256,256

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10016
pos = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
sprpriority = 50
ownpal = 0
ignorehitpause = 1
trans = sub
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = 10015
pos = 0,-64
postype = p1  ;p2,front,back,left,right
scale = 0.25,0.35
sprpriority = 250
ownpal = 1
ignorehitpause = 1
trans = add
persistent = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1 && anim=1700
time = 1
id = -1
pos = 24,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2 && anim=1700
time = 1
id = -1
pos = 32,-36

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3 && time<29 && anim=1700
time = 1
id = -1
pos = 28,-64

[State 0, EnvShake]
type = EnvShake
trigger1 = NumTarget && AnimElem = 4 && anim=1700
time = 15
freq = 60
ampl = -8
phase = 90

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time=40
value = 210
elem = 1
;ignorehitpause = 
;persistent = 

[State 0, Turn]
type = Turn
trigger1 = time=40 && pos x >= 0 && facing > 0
trigger2 = time=40 && pos x < 0 && facing < 0


[State 0, TargetFacing]
type = TargetFacing
triggerall = NumTarget
trigger1 = time=40 && pos x >= 0 && facing > 0
trigger2 = time=40 && pos x < 0 && facing < 0
value = -root,facing
ID = -1

[State 0, ScreenBound]
type = null;ScreenBound
trigger1 = 1
value = 0
movecamera = 1,1

[State 0, PosSet]
type = PosSet
trigger1 = time>=120
x = floor(pos x/1.01)

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = NumTarget && time = 45
value = -80
ID = -1
kill = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = NumTarget && time = 45
value = S4,2

[State 0, TargetState]
type = TargetState
trigger1 = NumTarget && time = 45
value = 3312
ID = -1

[State 0, TargetVelSet]
type = TargetVelSet
trigger1 = NumTarget && time = 45
x = 12
y = -8
ID = -1
;ignorehitpause = 
;persistent = 

[State 0, ChangeState]
type = ChangeState
trigger1 = time>100
value = 3311
ctrl = 0

;---------------------------------------------------------------------------
;Dark God's Wrath Grapple part 2
[Statedef 3311]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
poweradd = 100
ctrl = 0
anim = 1700
sprpriority = 2

[State 1.1 ZOOM]
type = null;zoom
trigger1 = var(6)<1
scale = 1+0.20
pos = target,pos x,target,pos y

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S5,22

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 256,256,256

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 256,256,256
invertall = 1
color = 256

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7106
ID = 3300
pos = 0,-64
postype = p2
removetime = -1
bindtime = -1
sprpriority = -100
ownpal = 0

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7106
ID = 3301
pos = 0,-64
postype = p2
removetime = -1
bindtime = -1
sprpriority = -100
ownpal = 0

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7106
ID = 3302
pos = 0,-64
postype = p2
removetime = -1
bindtime = -1
sprpriority = -100
ownpal = 0

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<10
ID = 3300
scale = time*0.02,time*0.02
removeongethit = 0
trans = addalpha
alpha = floor(256.00*(time/10.00)),256
angle = time*1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<25
ID = 3301
scale = time*0.02,time*0.02
removeongethit = 0
trans = addalpha
alpha = floor(256.00*(time/25.00)),256
angle = -time*1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<50
ID = 3302
scale = time*0.02,time*0.02
trans = addalpha
alpha = floor(256.00*(time/50.00)),256
angle = 180+(time*1)

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=10
ID = 3300
trans = addalpha
alpha = 256,256
angle = (time*1)

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=25
ID = 3301
trans = addalpha
alpha = 256,256
angle = (-time*1)

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=50
ID = 3302
trans = addalpha
alpha = 256,256
angle = 180+(time*1)

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 8    ;fv = 10
value = random%360

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 9    ;fv = 10
value = 600

[State 0, VarSet]
type = VarSet
trigger1 = time=0
v = 6    ;fv = 10
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = numhelper(3101)<1
v = 6   ;fv = 
value = 1

[State 0, Oh Look, another Cond Hack!]
type = null
trigger1 = numhelper(3101)>0
trigger1 = time%12=0 && time>50 && var(6)<1
trigger1 = helper(3101),cond(1,var(1) := helper(3101),var(1)-50,0)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%12=0 && time>50 && var(6)<1
value = S5,18

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = time%6=0 && time>50 && var(6)<1
value = -6
ID = -1
kill = 0
absolute = 0

[State 0, TargetBind]
type = null;TargetBind
trigger1 = time%6=0 && time>50 && var(6)<1
time = 1
id = -1
pos = -16+random%32,-32-random%32

[State 0, TargetState]
type = TargetState
triggerall = NumTarget
trigger1 = time%12=0 && time>50 && var(6)<1
value = 3313
ID = -1

[State 0, Hit Spark]
type = Explod
trigger1 = time%6=0 && time>50 && var(6)<1
anim = 7002
pos = 0,-64
vel = 0,0
random = 32,32
postype = p2  ;p2,front,back,left,right
scale = 0.25,0.25
sprpriority = 52
ownpal = 0
ignorehitpause = 1
angle = random%360

[State 0, HitAdd]
type = HitAdd
trigger1 = time%6=0 && time>50 && var(6)<1
trigger2 = var(6) = 80
trigger3 = var(6) = 200
value = 1

[State 0, Other Hit Spark]
type = Explod
trigger1 = time%6=0 && time>50 && var(6)<1
anim = 7001
pos = 0,-64
vel = Cos((var(8)/180.00)*pi)*8,Sin((var(8)/180.00)*pi)*8
postype = p2  ;p2,front,back,left,right
scale = 0.25,0.25
sprpriority = 50
ownpal = 1
ignorehitpause = 1
angle = random%360

[State 0, EnvShake]
type = EnvShake
trigger1 = time%6=0 && time>50 && var(6)<1
time = 8
freq = 60
ampl = -3

[State 0, Beaaamm! (God I sure hope the Kaslier guy doesn't sue me but this effect is TOO damn good)]
type = Explod
trigger1 = time%6=0 && time>50 && var(6)<1
anim = 10019
random = 64,64
pos = Cos((var(8)/180.00)*pi)*var(9),-64+Sin((var(8)/180.00)*pi)*var(9)
vel = 0,0
pos = 0,-64
postype = p2
removetime = -2
sprpriority = -4+random%8
scale = 0.20,1
trans = add
angle = -var(8)+90
pos = 0,0

[State 0, What's that?]
type = Explod
trigger1 = var(6)>50 && var(6)<60
anim = 939
id = 727
random = 0,0
pos = Cos((var(8)/180.00)*pi)*500,-64+Sin((var(8)/180.00)*pi)*500
vel = Cos((var(8)/180.00)*pi)*-26,Sin((var(8)/180.00)*pi)*-26
pos = 0,-64
postype = p2
removetime = 200
ownpal = 1
facing = 1
sprpriority = 56
scale = 1,1
trans = addalpha
alpha = 0,0
angle = -var(8)+180

[State 0, What's that?]
type = Explod
trigger1 = var(6)>50 && var(6)<60
anim = 786
id = 727
random = 0,0
pos = Cos((var(8)/180.00)*pi)*500,-64+Sin((var(8)/180.00)*pi)*500
vel = Cos((var(8)/180.00)*pi)*-26,Sin((var(8)/180.00)*pi)*-26
pos = 0,-64
postype = p2
removetime = 200
ownpal = 1
facing = 1
sprpriority = 50
scale = 1.2,1.4
angle = -var(8)+180
trans = sub

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6) = 55
value = S5,5
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6) = 80
value = S1,6
pitch = 0.5
channel = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = var(6) = 80
time = 30
freq = 60
ampl = -8

[State 0, Hit Spark]
type = Explod
trigger1 = var(6) = 80
anim = 7002
pos = 0,-64
vel = 0,0
postype = p2  ;p2,front,back,left,right
scale = 1,1
sprpriority = 52
ownpal = 0
ignorehitpause = 1
angle = random%360

[State 0, Beaaamm!]
type = Explod
trigger1 = var(6)>80 && var(6)<120
anim = 10017
id = 10017
random = var(6),var(6)
pos = Cos((var(8)/180.00)*pi)*var(9),-64+Sin((var(8)/180.00)*pi)*var(9)
vel = 0,0
pos = 0,-64
postype = p2
removetime = -2
sprpriority = 20
scale = 0.20,10
angle = -var(8)+90
pos = 0,0

[State 0, Beaaamm!]
type = Explod
trigger1 = var(6)>80 && var(6)<120
anim = 10017
id = 10017
random = var(6),var(6)
pos = Cos((var(8)/180.00)*pi)*var(9),-64+Sin((var(8)/180.00)*pi)*var(9)
vel = 0,0
pos = 0,-64
postype = p2
removetime = -2
sprpriority = 15
scale = 0.30,10
angle = -var(8)+90
pos = 0,0

[State 0, Beaaamm!]
type = Explod
trigger1 = var(6)>80 && var(6)<120
anim = 10017
id = 10017
random = var(6),var(6)
pos = Cos((var(8)/180.00)*pi)*var(9),-64+Sin((var(8)/180.00)*pi)*var(9)
vel = 0,0
pos = 0,-64
postype = p2
removetime = -2
sprpriority = 10
scale = 0.40,10
angle = -var(8)+90
pos = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6)=50
value = S7,348

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 8    ;fv = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 9    ;fv = 10
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6) = 200
value = S5,27

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6) = 200
value = S5,18

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(6) = 170
value = S5,25

[State 0, Hit Spark]
type = Explod
trigger1 = var(6) = 170
anim = 10015
pos = 160,120
random = 0,0
postype = left  ;p2,front,back,left,right
scale = 2,2
sprpriority = 530
ownpal = 1
trans = sub
ignorehitpause = 1
angle = 0

[State 0, Hit Spark]
type = Explod
trigger1 = var(6) = 170
anim = 10015
pos = 160,120
random = 0,0
postype = left  ;p2,front,back,left,right
scale = 3,3
sprpriority = 520
ownpal = 1
trans = add
ignorehitpause = 1
angle = 0

[State 0, Hit Spark]
type = Explod
trigger1 = var(6) = 200
anim = 10018
id = 10018
pos = 160,120
random = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
sprpriority = 520
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360

[State 0, Hit Spark]
type = Explod
trigger1 = var(6) = 200
anim = 10018
id = 10018
pos = 160,120
vel = 0,0
random = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
sprpriority = 500
ownpal = 1
trans = add
ignorehitpause = 1
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = var(6) = 170
anim = 10016
pos = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
sprpriority = 400
ownpal = 1
ignorehitpause = 1
trans = sub
persistent = 0

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = var(6) = 80
value = -150
ID = -1
kill = 0
absolute = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = var(6) = 200
time = 12
freq = 60
ampl = -4

[State 0, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = var(6) = 200
value = -150
ID = -1
kill = 1
absolute = 0

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(6) = 200
id = 10017
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(6) = 200
id = 3300
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(6) = 200
id = 3301
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(6) = 200
id = 3302

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = var(6) = 200
value = 5601
ID = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = var(6)>=200
;trigger1 = var(6) := 0
value = 0
ctrl = 1

;---------------------------
; P2-Thrown by Dark God's Wrath
[Statedef 3312]
type = A
physics = N
movetype = H
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 100

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = 0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[State 820, 1]
type = ChangeAnim
trigger1 = time = 0 || vel y < 0
value = 5030
elem = 0

[State 0, PosSet]
type = PosAdd
trigger1 = time>30
x = Floor((enemy,pos x-pos x)/(100/(1+(time/40.00))))*facing

[State 0, PosAdd]
type = PosAdd
trigger1 = time>1
y = floor((-64-pos y)/(100/(1+(time/40.00))))

[State 0, VelAdd]
type = VelAdd
trigger1 = time<50
x = 0
y = 0.25

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.9
y = 0.9

;---------------------------
; P2-Hit by Dark God's Wrath
[Statedef 3313]
type = A
physics = N
movetype = H
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 100

[State 0, VelSet]
type = VelSet
trigger1 = time=0
x = (1.00-(random%1000)/500.00)*5.00
y = (1.00-(random%1000)/500.00)*8.00
;ignorehitpause = 
;persistent = 

[State 0, Width]
type = Width
trigger1 = 1
edge = 0,0
player = 0,0
value = 0,0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1

[State 820, 1]
type = ChangeAnim
trigger1 = time = 0
value = 5061
elem = 0

[State 0, PosSet]
type = PosAdd
trigger1 = time>0
x = Floor((enemy,pos x-pos x)/(100/(1+(time/10.00))))*facing

[State 0, PosAdd]
type = PosAdd
trigger1 = time>1
y = floor((-64-pos y)/(40/(1+(time/10.00))))

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = 0.25

[State 0, VelMul]
type = VelMul
trigger1 = 1
x = 0.9
y = 0.9

;---------------------------------------------------------------------------
;Shadow Baptism - Attempt
[Statedef 3400]
type    = L
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 184
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time=1
value = 1000

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV3 Effect"
ID = 6300
stateno = 6300
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, BG things]
type = Explod
trigger1 = time>=10 && time<50
anim = 7101
pos = random%320,random%240
vel = 0,0
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = time/50.00,time/50.00
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360
supermovetime = 99999
pausemovetime = 99999

[State 0, BG things]
type = Explod
trigger1 = time>=10 && time<50
anim = 7101
pos = random%320,random%240
vel = 0,0
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = time/50.00,time/50.00
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = time=1
time = 40
sound = S7,318
pos = 0,9999
movetime = 40
darken = 0
unhittable = 1

[State 800, 2]
type = ChangeState
Trigger1 = Numhelper(3205)>0 && helper(3205),stateno = 3402
value = 3401
ctrl = 0

[State 800, 2]
type = ChangeState
Trigger1 = Time>60
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Shadow Baptism - Success
[Statedef 3401]
type    = L
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 752
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = time%30=0
Trigger1 = numhelper(3403)>0 && helper(3403),var(10)<400
anim = 10015
id = 6205
pos = 16,-66
postype = p1  ;p2,front,back,left,right
scale = 0.75,0.75
removetime = -2
sprpriority = 120
ownpal = 1
ignorehitpause = 1
trans = add
angle = 45

[State 0, Explod]
type = Explod
trigger1 = time%30=0
Trigger1 = numhelper(3403)>0 && helper(3403),var(10)<400
anim = 10015
id = 6205
pos = 16,-66
postype = p1  ;p2,front,back,left,right
scale = 0.75,0.75
removetime = -2
sprpriority = 120
ownpal = 1
ignorehitpause = 1
trans = add
angle = -45

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 100,100,100
;sinadd = 0,0,0,10
invertall = 0
color = 0

[State 800, 2]
type = ChangeState
Triggerall = time>60
Trigger1 = numhelper(3403)<1
Trigger2 = numhelper(3403)>0 && helper(3403),var(10)>460
value = 0
ctrl = 1

;------------------------------------------------------------
;Shadow Bap helper (From Red Queen)
[statedef 3402]
type = L
Movetype = I
physics = N
velset = 0,0
anim = 10009

[State 0, VarAdd]
type = null
trigger1 = numhelper(3203)>0
trigger1 = helper(3203),cond(1,var(1) := var(1)-1,0)

[State 0, VarAdd]
type = VarAdd
trigger1 = numhelper(3203)<1 && time>120
v = 10    ;fv = 
value = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10016
pos = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
sprpriority = 250
ownpal = 0
ignorehitpause = 1
trans = none
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = time = 30
anim = 10016
pos = 0,0
postype = left  ;p2,front,back,left,right
scale = 1,1
removetime = 10
sprpriority = 40
ownpal = 1
ignorehitpause = 1
trans = sub
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = time = 20
helpertype = normal ;player
name = "Extra Effects"
ID = 3403
stateno = 3403
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = 1
time = 1
add = 220,220,220
color = 0

[State 0, PalFX]
type = PalFX
trigger1 = time>=10 && time<40
time = 1
add = 0,0,0
mul = floor(255.00-(255.00*((time-10)/30.00))),floor(255.00-(255.00*((time-10)/30.00))),floor(255.00-(255.00*((time-10)/30.00)))
;sinadd = 0,0,0,10
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=40
time = 1
add = 0,0,0
mul = 0,255,255
;sinadd = 0,0,0,10
invertall = 1
color = 80

[State 0, EnvShake]
type = EnvShake
trigger1 = time%10=0
time = 10
freq = 60
ampl = -2
phase = 90

[State 0, BG things]
type = Explod
trigger1 = time>=20
anim = 10021
id = 10021
pos = -20+random%360,250
vel = 0,-2
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = 1,1
sprpriority = -10
ownpal = 0
ignorehitpause = 1
angle = random%360

[State 0, BG things]
type = Explod
trigger1 = time>=20
anim = 7101
id = 10021
pos = -20+random%360,220+random%40
vel = 0,-(random%1000)/500.00
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = 0.4,0.4
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360

[State 0, BG things]
type = Explod
trigger1 = time>=20
anim = 7101
id = 10021
pos = -20+random%360,220+random%40
vel = 0,-(random%1000)/500.00
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = 0.4,0.4
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360

[State 0, BG things]
type = Explod
trigger1 = time>=20
anim = 7101
id = 10021
pos = -20+random%360,280+random%40
vel = 0,-(random%1000)/500.00
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = 0.6,0.6
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360

[State 0, BG things]
type = Explod
trigger1 = time>=20
anim = 7101
id = 10021
pos = -20+random%360,280+random%40
vel = 0,-(random%1000)/500.00
postype = left  ;p2,front,back,left,right
facing = -1
removetime = -2
scale = 0.6,0.6
sprpriority = 100
ownpal = 1
trans = sub
ignorehitpause = 1
angle = random%360

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)<1
trigger1 = time>=80 && time%8=0 && time<220
value = S5,28

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=80 && time%8=0 && time<220
anim = 10023
pos = 0, -pos y+200
vel = 0,0
random = 48,0
postype = p2
facing = -1
removetime = -2
scale = 1,1.50
sprpriority = 80
ownpal = 1
trans = sub
ignorehitpause = 1
angle = 10-random%20

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=80 && time%8=0 && time<220
anim = 10023
pos = 0, -pos y-320
vel = 0,0
random = 48,0
postype = p2
facing = -1
removetime = -2
scale = 1,-2.50
sprpriority = 80
ownpal = 1
trans = add
ignorehitpause = 1
angle = 10-random%20

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=40 && (time+8)%16=0 && time<600
anim = 6204
pos = -32, -pos y+320
vel = 0,0
random = 48,0
postype = p2
facing = -1
removetime = -2
scale = 1,2.50
sprpriority = 80
ownpal = 0
trans = add
ignorehitpause = 1
angle = 10-random%20

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=40 && time%16=0 && time<600
anim = 6204
pos = 32, -pos y+200
vel = 0,0
random = 48,0
postype = p2
facing = -1
removetime = -2
scale = 1,1.50
sprpriority = 80
ownpal = 0
trans = add
ignorehitpause = 1
angle = 10-random%20

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)<1
trigger1 = time>=220 && time%12=0 && time<300
value = S7,344

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=220 && time%24=0 && time<400
anim = 6200
pos = 0, -pos y
vel = 0,0
random = 200,0
postype = p2
facing = -1
removetime = -2
scale = 1,1
sprpriority = 80
ownpal = 1
trans = sub
ignorehitpause = 1
angle = 0

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=220 && time%12=0 && time<400
anim = 10019
pos = 0, -pos y+160
vel = 0,0
random = 64,0
postype = p2
facing = -1
removetime = -2
scale = 0.25,1
sprpriority = 80
ownpal = 1
trans = sub
ignorehitpause = 1
angle = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)<1
trigger1 = time>=400 && time%3=0 && time<430
value = S5,19

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(10)<1
trigger1 = time>=400 && time%3=0 && time<430
value = S1,10

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=400 && time%4=0 && time<430
anim = 10020
id = 10020
pos = 0, 0
vel = 0,0
random = 96,96
postype = p2
facing = -1
removetime = -1
scale = 1,1
sprpriority = 80
ownpal = 1
trans = sub
ignorehitpause = 1
angle = 30-random%60

[State 0, HitAdd]
type = HitAdd
triggerall = var(10)<1
trigger1 = time>=80 && time%8=0 && time<220
trigger2 = time>=220 && time%12=0 && time<400
trigger3 = time>=400 && time%8=0 && time<430
value = 1

[State 0, LifeAdd]
type = targetLifeAdd
triggerall = var(10)<1
trigger1 = time>=80 && time%8=0 && time<220
value = -8
kill = 0
absolute = 0
persistent = 5

[State 0, LifeAdd]
type = targetLifeAdd
triggerall = var(10)<1
trigger1 = time>=220 && time%12=0 && time<400
value = -6
kill = 0
absolute = 0
persistent = 5

[State 0, LifeAdd]
type = targetLifeAdd
triggerall = var(10)<1
trigger1 = time>=400 && time%8=0 && time<430
value = -12
kill = 0
absolute = 0
persistent = 5

[State 0, BG things]
type = Explod
triggerall = var(10)<1
trigger1 = time>=40 && (time+8)%16=0
anim = 6204
pos = -32, -pos y+320
vel = 0,0
random = 48,0
postype = p2
facing = -1
removetime = -2
scale = 1,2.50
sprpriority = 80
ownpal = 0
trans = add
ignorehitpause = 1
angle = 10-random%20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%60=0
value = S7,328

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time%40=0
value = S5,1

[State 0, Reversal]
Type = ReversalDef
Trigger1 = Time = 0
Reversal.Attr = C,NP
PauseTime = 0,0
SparkNo = -1
NumHits = 0

[State 0, posset]
type = posset
trigger1 = time >= 1
x = enemy,pos x
y = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
id = -1
pos = 0,-64

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = target,stateno!= 1021
value = 1021
ID = -1

[State 0, TargetVelSet]
type = TargetVelSet
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
x = -4
y = -16
ID = -1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
id = 10021

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
id = 10020

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
value = ifelse(NumTarget>0 && target,life<2,5150,5601)
ID = -1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
value = -300
ID = -1
kill = 1
absolute = 0

[State 0, TargetDrop]
type = TargetDrop
triggerall = NumTarget;()
trigger1 = root,stateno != [3400,3402]
excludeID = -1
keepone = 0

[state 4005, 1]
type = destroyself
trigger1 = root,stateno != [3400,3402]

;------------------------------------------------------------
;Shadow Bap helper extra effects (From Red Queen)
[statedef 3403]
type = L
Movetype = I
physics = N
velset = 0,0
anim = 10009

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10    ;fv = 10
value = 199

[State 0, PlaySnd]
type = PlaySnd
trigger1 = parent,var(10)=2
value = S5,25

[State 0, VarAdd]
type = VarAdd
trigger1 = parent,var(10)>0
v =  10   ;fv = 
value = 1

[State 0, PalFX]
type = PalFX
trigger1 = var(10)<460
time = 1
add = 0,0,0
mul = 256,256,256
;sinadd = 0,0,0,10
invertall = 1
color = 0

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7102
id = 7103
pos = 0,0
postype = left  ;p2,front,back,left,right
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = 1,1
sprpriority = -50
ownpal = 1
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 7102
id = 7103
pos = 0,0
postype = left  ;p2,front,back,left,right
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
scale = 1,1
sprpriority = -50
ownpal = 1
trans = sub

[State 0, PalFX]
type = PalFX
trigger1 = var(10)>=460
time = 1
add = 0,0,0
mul = floor(256-((var(10)-(480))*(256.00/60.00))),floor(256-((var(10)-(480))*(256.00/60.00))),floor(256-((var(10)-(480))*(256.00/60.00)))
invertall = 1
color = 0

[State 0, Explod]
type = Explod
trigger1 = time = 30
anim = 1084
id = 1084
pos = -32,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
scale = 1,2
sprpriority = 90
ownpal = 0
ignorehitpause = 1
trans = add

[State 0, Explod]
type = Explod
trigger1 = time = 30
anim = 1084
id = 1084
pos = 32,0
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -1
scale = -1,2
sprpriority = 90
ownpal = 0
ignorehitpause = 1
trans = add

[State 0, BG things]
type = Explod
trigger1 = time>=0 && time<40
anim = 10022
id = 1085
pos = -40+random%400, 240
vel = 0,0
postype = left
facing = -1
removetime = -1
scale = 0.5,0.75
sprpriority = -2
ownpal = 0
trans = addalpha
alpha = 25,256
ignorehitpause = 1
angle = 30-random%60
angley = 70

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = var(10)>200 && var(10)<400
ID = 1085
anim = 10022
scale = 0.5+((var(10)-200)*0.03),0.75+((var(10)-200)*0.03)
trans = addalpha
alpha = 25+floor(((var(10)-200)/200)*(235.00/255.00)),256
sprpriority = 91

[State 0, BG things]
type = Explod
trigger1 = time>=0 && time<20
anim = 10022
id = 1084
pos = 0, 48+(time-2)*6
vel = 0,0
random = 32,0
postype = p1
facing = -1
removetime = -1
scale = 0.75,0.75
sprpriority = 90
ownpal = 0
trans = addalpha
alpha = 120,256
ignorehitpause = 1
angle = 30-random%60
angley = 70

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(10)<200 && root,stateno != [3400,3402]
trigger2 = var(10)>500
id = 7103

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(10)<200 && root,stateno != [3400,3402]
trigger2 = var(10)>540
id = 1085

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(10)<200 && root,stateno != [3400,3402]
trigger2 = var(10)>540
id = 1084

[state 4005, 1]
type = destroyself
trigger1 = var(10)<200 && root,stateno != [3400,3402]
trigger2 = var(10)>540

;---------------------------------------------------------------------------
; Hyper Lv1 Helper Effect
[Statedef 6100]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -1000                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=0
v = 58    ;fv = 
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S6,0

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time < 5
time = 1
add = floor(-40.00*(time/5.00)),floor(-255.00*(time/5.00)),floor(-40.00*(time/5.00))
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time >= 5 && time <= 20
time = 1
add = -40,-255,-40
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
triggerall = root,stateno != 3050 || root,time<30
trigger1 = Time > 20
time = 1
add = floor(-40.00+(40.00*((time-20)/20.00))),floor(-255+(255.00*((time-20)/20.00))),floor(-40.00+(40.00*((time-20)/20.00)))
supermove = 99999
pausemove = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermove = 99999
pausemove = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time>0
time = 1
mul = floor(256-(((time-0)/30.00)*256.00)),floor(256-(((time-0)/30.00)*256.00)),floor(256-(((time-0)/30.00)*256.00))
invertall = 0
color = 256

[State 0, PalFX]
type = PalFX
trigger1 = time>=30
time = 1
mul = 0,0,0
invertall = 0
color = 256

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 12
freq = 60
ampl = -3
phase = 90
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.4,1
sprpriority = -12
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
xangle = 0
angle = 0
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.6,0.6
sprpriority = -10
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
xangle = 0
angle = 30-random%60
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.50,0.5
sprpriority = -6
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
xangle = 0
angle = 30-random%60
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.4,0.4
sprpriority = 15
ontop = 0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 75,255
yangle = 20
angle = 10-random%20
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6002
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.20,0.20
sprpriority = 15
ontop = 0
ownpal = 0
removeongethit = 0
trans = addalpha
alpha = 256,255
angle = 10-random%20
supermove = 99999
pausemove = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>40
ignorehitpause = 1
persistent = 1
supermove = 99999
pausemove = 99999

;---------------------------------------------------------------------------
; Hyper Lv2 Helper Effect
[Statedef 6200]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -2000                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=0
v = 58    ;fv = 
value = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S6,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S6,1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermove = 99999
pausemove = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 15
freq = 60
ampl = -4
phase = 90
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time < 5
time = 1
add = floor(-120.00*(time/5.00)),floor(-255.00*(time/5.00)),floor(-120.00*(time/5.00))
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time >= 5 && time <= 20
time = 1
add = -120,-255,-120
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
triggerall = root,stateno != 3050 || root,time<30
trigger1 = Time > 20
time = 1
add = floor(-120.00+(120.00*((time-20)/20.00))),floor(-255+(255.00*((time-20)/20.00))),floor(-120.00+(120.00*((time-20)/20.00)))
supermove = 99999
pausemove = 99999

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = 0,0,0
mul = 100-floor((time/10)*(100/10.00)),100-floor((time/10)*(100/10.00)),100-floor((time/10)*(100/10.00))
;sinadd = 0,0,0,10
invertall = 0
color = 0
supermove = 99999
pausemove = 99999

[State 1380, Explod]
type = Explod
trigger1 = time=0
anim = 943
pos = 0,0
postype = p1
facing = 1
bindtime = 1
vel = 0,0
removetime = -2
scale = 0.75,1
sprpriority = 10
removeongethit = 1
trans = sub
ownpal = 1
supermove = 99999
pausemove = 99999

[State 1380, Explod]
type = Explod
trigger1 = time=0
anim = 943
pos = 0,0
postype = p1
facing = 1
bindtime = 1
vel = 0,0
removetime = -2
scale = 1,0.75
sprpriority = 10
removeongethit = 1
trans = sub
ownpal = 1
supermove = 99999
pausemove = 99999


[State 0, Explod]
type = Explod
trigger1 = time<10
anim = 6004
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1.00-((time/10)*(1.0/10.00)),1
sprpriority = 20
ontop = 0
ownpal = 1
removeongethit = 0
trans = addalpha
alpha = 255-floor((time/10)*(255/10.00)),255
angle = random%360
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time<10
anim = 6004
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1.50-((time/10)*(1.0/10.00)),1.5
sprpriority = 10
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
alpha = 64,255
angle = random%360
supermove = 99999
pausemove = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>80
ignorehitpause = 1
persistent = 1
supermove = 99999
pausemove = 99999

;---------------------------------------------------------------------------
; Hyper Lv3 Helper Effect
[Statedef 6300]
movetype = I                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
poweradd = -3000                    ;Power to add (Def: 0)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 6100
velset = 0,0

[State 0, ParentVarAdd]
type = ParentVarAdd
trigger1 = time=0
v = 58    ;fv = 
value = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S6,2

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 12
ontop = 0
ownpal = 0
removeongethit = 0
trans = add
angle = 0
supermove = 99999
pausemove = 99999

[State 0, Explod]
type = Explod
trigger1 = time=0
anim = 6003
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -12
ontop = 0
ownpal = 0
removeongethit = 0
trans = sub
angle = 0
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time < 5
time = 1
add = floor(-80.00*(time/5.00)),floor(-255.00*(time/5.00)),floor(-120.00*(time/5.00))
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time >= 5 && time <= 30
time = 1
add = -80,-255,-120
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = BGPalFX
trigger1 = Time > 30 && time<70
time = 1
add = floor(-80.00+(80.00*((time-30)/40.00))),floor(-255+(255.00*((time-30)/40.00))),floor(-120.00+(120.00*((time-30)/40.00)))
supermove = 99999
pausemove = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 9999
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = PalFX
trigger1 = Time < 10
time = 1
mul = floor(250.00*(time/10.00)),floor(10.00*(time/10.00)),floor(100.00*(time/10.00))
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = PalFX
trigger1 = Time >= 10 && time <= 40
time = 1
mul = 250,10,100
supermove = 99999
pausemove = 99999

[State 4233, BGPalFX]
type = PalFX
trigger1 = Time > 40
time = 1
mul = floor(250.00-(250.00*((time-40)/20.00))),floor(10-(10.00*((time-40)/20.00))),floor(100.00-(100.00*((time-40)/20.00)))
supermove = 99999
pausemove = 99999

[State 0, EnvShake]
type = null;EnvShake
trigger1 = time=0
time = 15
freq = 60
ampl = -4
phase = 90
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 160,0
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 4,1
sprpriority = 480
ontop = 1
ownpal = 0
trans = sub
alpha = 255,255
angle = 270
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 160,240
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 4,1
sprpriority = 480
ontop = 1
ownpal = 0
trans = sub
alpha = 255,255
angle = 90
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 0,120
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 4,1
sprpriority = 480
ontop = 1
ownpal = 0
trans = sub
alpha = 255,255
angle = 180
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 320,120
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 4,1
sprpriority = 480
ontop = 1
ownpal = 0
trans = sub
alpha = 255,255
angle = 0
supermove = 99999
pausemove = 99999





[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 160,0
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 500
ontop = 1
ownpal = 0
trans = addalpha
alpha = 255,255
angle = 270
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 160,240
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 500
ontop = 1
ownpal = 0
trans = addalpha
alpha = 255,255
angle = 90
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 0,120
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 500
ontop = 1
ownpal = 0
trans = addalpha
alpha = 255,255
angle = 180
supermove = 99999
pausemove = 99999

[State 0, Kaslier Beam thing, again]
type = Explod
trigger1 = time=0
anim = 10020
pos = 320,120
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
scale = 1,1
sprpriority = 500
ontop = 1
ownpal = 0
trans = addalpha
alpha = 255,255
angle = 0
supermove = 99999
pausemove = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>80
ignorehitpause = 1
persistent = 1
supermove = 99999
pausemove = 99999

;---------------------------------------------------------------------------
; Awakening
[Statedef 4000]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1018
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = intro
supermovetime = 99999
pausemovetime = 99999

[State 0, Pause]
type = SuperPause
trigger1 = time=1
time = 330
movetime = 330
poweradd = 3000
pausebg = 1
darken = 0
pos = 0,10000
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV3 Effect"
ID = 6300
stateno = 6300
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Effects"
ID = 4001
stateno = 4001
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=5
value = S7,318
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = (time+30)%60=0 & time>5 && time<150
value = S5,30
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S5,29
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S5,31
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%20=0 && time<150
time = 20
freq = 80
ampl = -2
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time<120
time = 1
;add = 0,0,0
mul = 256-floor(time*(256/120.00)),256-floor(time*(256/120.00)),256-floor(time*(256/120.00))
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>=120 && time<=150
time = 1
;add = 0,0,0
mul = 0,0,0
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1018 && time = 150
value = 928
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 928 && animtime>-60
value = 928
elem = 6
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>150 && time<250
time = 1
add = 100-floor((time-150)*(100/100.00)),100-floor((time-150)*(100/100.00)),100-floor((time-150)*(100/100.00))
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time<=120 && time%3=0
anim = 10015
ID = 10015
pos = 2,-34
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
random = 24,6
scale = 0.1,0.1
sprpriority = 250
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time<150 && time>120
anim = 10015
ID = 10015
pos = 2,-34-floor((time-120)*2.35)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
random = 24,6
scale = 0.1,0.1
sprpriority = 250
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time>150 && time<300 && time%3=0
anim = 10015
ID = 10015
pos = -2,-98
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.15,0.11
sprpriority = 250
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999
angle = 20-random%40

[State 0, Explod]
type = Explod
trigger1 = time=150
anim = 10024
ID = 10024
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = -10
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=150
anim = 10025
ID = 10025
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,1
sprpriority = -50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=150
anim = 10025
ID = 10025
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 0.5,1
sprpriority = -50
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time>150 && time<300 && random<50
anim = 10023
ID = 10023
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
random = 64,16
scale = 1,1
sprpriority = -20+random%25
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time>150 && time<300 && random<5000-((time-200)*50.00)
anim = 7100
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
vel = 0,-3.00-((random%1000)/500.00)
random = 64,16
scale = 0.1,0.1
sprpriority = -20+random%40
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, EnvShake]
type = EnvShake
trigger1 = time=150
time = 50
freq = 60
ampl = -6
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time=200
time = 100
freq = 60
ampl = -4
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>300
ID = 10024
trans = addalpha
alpha = 255-floor((time-300)*(255.00/30.00)),floor((time-300)*(255.00/30.00))
supermovetime = 99999
pausemovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time=330
id = 10024
supermovetime = 99999
pausemovetime = 99999

[State 0, VarSet]
type = VarSet
trigger1 = time = 150
fv = 30    ;fv = 10
value = 1000

[State 0, ChangeState]
type = ChangeState
trigger1 = time=330
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Awakening helper
[Statedef 4001]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1018
velset = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time<80 && time>0 && time%4=0
anim = 10022
ID = 10022
pos = 0,-32
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
random = floor(time/1),floor(time/1)
sprpriority = 50
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time<150
id = 10022
scale = time/120.00,time/120.00

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=150
id = 10022
scale = (time/120.00)+(((time-150)/15.00)),(time/120.00)+(((time-150)/8.00))

[State 0, PalFX]
type = PalFX
trigger1 = time<=150
time = 1
add = 0,0,0
mul = floor(time*(255/1400.00)),floor(time*(255/1400.00)),floor(time*(255/1400.00))
invertall = 0
color = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time>150
time = 1
add = 0,0,0
mul = 150-floor((time-150)*(150.00/30.00)),150-floor((time-150)*(150.00/30.00)),150-floor((time-150)*(150.00/30.00))
invertall = 0
color = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time=180
id = 10022
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time>180
supermovetime = 99999
pausemovetime = 99999

;---------------------------------------------------------------------------
; Gaping Maw of Nox
[Statedef 4150]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1018
velset = 0,0

[State 0, Pause]
type = SuperPause
trigger1 = time=1
time = 30
movetime = 30
poweradd = 3000
pausebg = 1
darken = 0
pos = 0,10000
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV3 Effect"
ID = 6300
stateno = 6300
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%10=0 && time>100
time = 10
freq = 80
ampl = -2
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = (time > 60 && time%4=0) || time=60
value = 946
elem = 0
supermovetime = 99999
pausemovetime = 99999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time > 60
flag = invisible
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time>60
time = 1
add = 0,0,0
mul = 150,150,150
;sinadd = 0,0,0,10
invertall = 1
color = 256
supermovetime = 99999
pausemovetime = 99999


[State 0, VarSet]
type = VarAdd
trigger1 = time=1
v = 5    ;fv = 10
value = -500
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time<160 && time>80
time = 1
add = floor((time-80)*(256/80.00)),floor((time-80)*(256/80.00)),floor((time-80)*(256/80.00))
mul = 256,256,256
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>=160
time = 1
add = 256,256,256
mul = 256,256,256
supermovetime = 99999
pausemovetime = 99999

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time>60
pausemovetime = 99999
supermovetime = 99999

random = 2,2
anim = 946
pos = 0,0
removetime = 1
postype = p1
ownpal = 1
removetime = -2
sprpriority = -4+random%8
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time=110
anim = 10028
ID = 4150
pos = 0,-64
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
removetime = 400
random = 24,6
scale = 0,0
sprpriority = 154
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=110
anim = 10028
ID = 4151
pos = 0,-64
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
removetime = 400
random = 24,6
scale = 0,0
sprpriority = -150
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=110
ID =4150
postype = p1  ;p2,front,back,left,right
pos = 0, (-160+(160/((time-60)/25.00)*1.00+0.01))
scale = (time-110)*0.02,(time-110)*0.020
trans = add
angle = -time

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time>=110
ID = 4151
postype = p1  ;p2,front,back,left,right
pos = 0, (-160+(160/((time-60)/25.00)*1.00+0.01))
scale = (time-110)*0.025,(time-110)*0.025
trans = sub
angle = time

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 8    ;fv = 10
value = random%360

[State 0, VarSet]
type = VarSet
trigger1 = time<110
v = 9    ;fv = 10
value = (16+random%48)

[State 0, PosSet]
type = PosSet
trigger1 = time>60
x = pos x*0.925
y = -150+(150/(1.00+(time-60)/12.00))

[State 0, Explod]
type = Explod
trigger1 = time>60 && time<300
anim = 7100
pos = 0,-32
random = 32,16
vel = 0,6.00+(random%1000)/250.00
postype = p1
facing = 1
removetime = -2
scale = 0.10,0.25
sprpriority = -60
ownpal = 1
removeongethit = 0
trans = sub

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time<150 && time>60
anim = 10021
random = 0,0
pos = Cos((var(8)/180.00)*pi)*var(9),(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*var(9)
postype = p1
vel = Cos((var(8)/180.00)*pi)*1,Sin((var(8)/180.00)*pi)*2
removetime = -2
sprpriority = 50+random%20
scale = 0.15,0.35
angle = -var(8)+90
ownpal = 0

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time<110 && time>60
anim = 10029
random = 0,0
pos = Cos((var(8)/180.00)*pi)*var(9),(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*var(9)
postype = p1
vel = Cos((var(8)/180.00)*pi)*1,Sin((var(8)/180.00)*pi)*2
removetime = -2
sprpriority = -150+random%200
scale = 0.15,0.35
angle = -var(8)+180
ownpal = 1
trans = sub

[State 0, VarSet]
type = VarSet
trigger1 = time>=110
v = 9    ;fv = 10
value = ((time-110)*1.40)+(16+random%48)

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time>150
anim = 10021
random = 0,0
pos = Cos((var(8)/180.00)*pi)*var(9)*0.75,(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*var(9)*0.75
postype = p1
vel = Cos((var(8)/180.00)*pi)*1,Sin((var(8)/180.00)*pi)*2
removetime = -2
sprpriority = 50+random%20
scale = 0.25,1.85
angle = -var(8)+90
ownpal = 0

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time>120
anim = 7100
random = 0,0
pos = Cos((var(8)/180.00)*pi)*(var(9)-60),(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*(var(9)-60)
postype = p1
vel = Cos((var(8)/180.00)*pi)*(4+(var(9)/60.00)),Sin((var(8)/180.00)*pi)*(4+(var(9)/60.00))
removetime = -2
sprpriority = -50+random%120
scale = 0.15+(var(9)/260.00),0.15+(var(9)/260.00)
angle = -var(8)
trans = sub
ownpal = 1

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time>120 && random<(time-120)*25
anim = 7100
random = 0,0
pos = Cos((var(8)/180.00)*pi)*(var(9)-60)*0.60,(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*(var(9)-60)*0.60
postype = p1
vel = Cos((var(8)/180.00)*pi)*(4+(var(9)/60.00)),Sin((var(8)/180.00)*pi)*(4+(var(9)/60.00))
removetime = -2
sprpriority = 50+random%60
scale = (0.05+(var(9)/360.00))/1.00,(0.05+(var(9)/360.00))/1.00
angle = var(8)
trans = add
ownpal = 1

[State 0, VarSet]
type = VarSet
trigger1 = time>=110
v = 9    ;fv = 10
value = ((time-110)*1.60)+(16+random%48)

[State 0, Glowing Sparkles]
type = Explod
trigger1 = time>140
anim = 10029
random = 0,0
pos = Cos((var(8)/180.00)*pi)*var(9),(-160+(160/((time-60)/25.00)*1.00+0.01))+Sin((var(8)/180.00)*pi)*var(9)
postype = p1
vel = Cos((var(8)/180.00)*pi)*1,Sin((var(8)/180.00)*pi)*1
removetime = -2
sprpriority = 151
scale = 0.45,-(0.25+(time-110)*0.006)
angle = -var(8)+180
trans = add
ownpal = 1

[State 210, 2]
type = Projectile
trigger1 = time>120 && time%4=0
projanim = 6206
projremove = 1
projremovetime = 5
projscale = 0.001,0.001
offset = 0, (-160+(160/((time-60)/25.00)*1.00+0.01))
attr = A, HA
animtype  = Hard
damage    = 8,8
hitflag = MAFD
id = 3050
guardflag = U
pausetime = 0,8
sparkno = S7000
sparkxy = -9999,0
guard.sparkno = -1
;hitsound   = S7,67
;guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing*3,-9
air.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing*3,-9
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
fall.yvelocity = -8
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = -(time-120),-(time-120),-(time-120)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>450
id = 4150

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time>450
id = 4151

[State 0, Explod]
type = Explod
trigger1 = time>450
anim = 7100
pos = 160,120
postype = back
facing = 1
bindtime = -1
removetime = -2
scale = 10,10
sprpriority = 180
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time>450
anim = 10027
pos = 0,0
postype = back
facing = 1
bindtime = -1
removetime = -2
scale = 1,1
sprpriority = 150
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time=450
anim = 10027
pos = 0,0
postype = front
facing = -1
bindtime = -1
removetime = -2
scale = 1,1
sprpriority = 150
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeState]
type = ChangeState
trigger1 = time>450
value = ifelse(pos y<0,51,0)
ctrl = ifelse(pos y<0,0,1)

;---------------------------------------------------------------------------
; Rage Fury (Rage Lv3)
[Statedef 4100]
movetype= A                      ;Move-type: A-attack, I-idle, H-gethit
physics = N                      ;Physics: S-stand, C-crouch, A-air
juggle  = 4                      ;Number of air juggle points move takes
;Commonly-used controllers:                    
ctrl = 0                         ;Set ctrl (Def: no change)
sprpriority = 2                  ;Set layering priority to 2 (in front)
anim = 1018
velset = 0,0

[State 0, Pause]
type = SuperPause
trigger1 = time=1
time = 160
movetime = 160
poweradd = 3000
pausebg = 1
darken = 0
pos = 0,10000
supermovetime = 99999
pausemovetime = 99999

[State 0, VarSet]
type = VarAdd
trigger1 = time=1
v = 5    ;fv = 10
value = -500
supermovetime = 99999
pausemovetime = 99999


[State 0, Helper]
type = Helper
trigger1 = time=1
helpertype = normal ;player
name = "Hyper LV3 Effect"
ID = 6300
stateno = 6300
pos = 0,-48
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=5
value = S7,318
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = (time+30)%30=0 & time>5 && time<150
value = S5,30
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S5,29
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S7,143
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=120
value = S7,145
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S5,31
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=150
value = S5,33
supermovetime = 99999
pausemovetime = 99999

[State 0, EnvShake]
type = EnvShake
trigger1 = time%10=0 && time<120
time = 20
freq = 80
ampl = -2
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, BGPalFX]
type = BGPalFX
trigger1 = time<120 && time>60
time = 1
add = floor((time-60)*(256/60.00)),floor((time-60)*(256/60.00)),floor((time-60)*(256/60.00))
mul = 256,256,256
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time<=120 && time>60
time = 1
add = 0,0,0
mul = 256-floor((time-60)*(256/60.00)),256-floor((time-60)*(256/60.00)),256-floor((time-60)*(256/60.00))
invertall = 0
color = 256
supermovetime = 99999
pausemovetime = 99999


[State 0, BGPalFX]
type = BGPalFX
trigger1 = time>=120
time = 1
add = 256,256,256
mul = 256,256,256
supermovetime = 99999
pausemovetime = 99999

[State 0, PalFX]
type = PalFX
trigger1 = time>120
time = 1
add = 0,0,0
mul = 0,0,0
invertall = 0
color = 256
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 1018 && time = 150
value = 928
elem = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Explod]
type = Explod
trigger1 = time<=120 && time%3=0
anim = 10015
ID = 10015
pos = 5,-40
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
removetime = -2
random = 24,6
scale = 0.02+time*0.012,0.02+time*0.005
sprpriority = 150
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = 20-random%40

[State 0, Explod]
type = Explod
trigger1 = time<=120 && time%3=0
anim = 10015
ID = 10015
pos = 5,-40
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
random = 24,6
scale = 0.1+time*0.02,0.1+time*0.01
sprpriority = 250
ownpal = 1
removeongethit = 0
trans = add
supermovetime = 99999
pausemovetime = 99999
angle = 20-random%40

[State 0, Explod]
type = Explod
trigger1 = time<=160 && time%2=0
anim = 7101
pos = 0,48
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = 0,-4+(-random%1200)/160.00
removetime = -2
random = time,6
scale = 0.02+time*0.0022,0.02+time*0.0035
sprpriority = 120
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, Explod]
type = Explod
trigger1 = time<=160
anim = 7101
pos = 0,48
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = 0,-4+(-random%500)/200.00
removetime = -2
random = time*4,6
scale = 0.04,0.04
sprpriority = 120
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time>160
flag = nobardisplay
flag2 = nojugglecheck
supermovetime = 99999
pausemovetime = 99999


[State 1.1 ZOOM]
type = zoom
trigger1 = time = [20,160]
scale = 1+(0.010-time/30000.00)*(time-20)
pos = pos x,pos y

[State 1.1 ZOOM]
type = zoom
trigger1 = time = [160,180]
scale = 1+((0.010-time/30000.00)*(time-20))*(1.00-((time-160)/20.00))
pos = pos x,pos y

[State 0, Explod]
type = Explod
trigger1 = time=140
anim = 10015
pos = 0,-46
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
removetime = -2
random = 0,0
scale = 1,2
sprpriority = -280
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = 90

[State 0, EnvShake]
type = EnvShake
trigger1 = time%20=0 && time>150
time = 20
freq = 80
ampl = -3
;phase = 90
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time >160 && time%60=0
value = 928
elem = 5
supermovetime = 99999
pausemovetime = 99999

[State 210, 2]
type = Projectile
trigger1 = time>160 && time%4=0
projanim = 6206
projremove = 1
projremovetime = 5
attr = A, HA
animtype  = Hard
damage    = 8,8
hitflag = MAFD
guardflag = U
pausetime = 0,8
sparkno = S7000
sparkxy = -9999,0
guard.sparkno = -1
;hitsound   = S7,67
;guardsound = S3,1
ground.type = High
ground.slidetime = 4
ground.hittime  = 13
ground.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing,-12
air.velocity = ifelse(root,pos x-pos x>0,-1,1)*facing,-12
givepower = 8
getpower = 0
guard.velocity = -10
guard.slidetime = 20
fall = 1
fall.recover = 0
fall.damage = 100
fall.yvelocity = -8
;envshake.time = 7
;envshake.ampl = 4
ground.cornerpush.veloff = .3
guard.cornerpush.veloff = .3
palfx.time = 20
palfx.add = 200,55,0

[State 0, Explod]
type = Explod
trigger1 = time>160
anim = 7101
pos = -80+random%400,360
postype = back  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = (500-random%1000)/500.00,-8+(-random%500)/100.00
removetime = -2
random = 0,0
scale = 2,2
sprpriority = 130
ownpal = 1
removeongethit = 0
trans = addalpha
alpha = 150,255
supermovetime = 99999
pausemovetime = 99999
angle = random%360
yangle = 70

[State 0, Explod]
type = Explod
trigger1 = time>160
anim = 7101
pos = -80+random%400,320
postype = back  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = (500-random%1000)/500.00,-4+(-random%800)/200.00
removetime = -2
random = 0,0
scale = 2.4,2.4
sprpriority = -120
ownpal = 1
removeongethit = 0
trans = sub
supermovetime = 99999
pausemovetime = 99999
angle = random%360
yangle = 50

[State 0, Explod]
type = Explod
trigger1 = time>300
anim = 7101
pos = -80+random%400,360
postype = back  ;p2,front,back,left,right
facing = -1
vfacing = -1
bindtime = 1
vel = (500-random%1000)/500.00,-8+(-random%500)/100.00
removetime = -2
random = 0,0
scale = 1+((time-300)/50.00),1+((time-300)/50.00)
sprpriority = 120
ownpal = 1
removeongethit = 0
trans = addalpha
alpha = 255,255
supermovetime = 99999
pausemovetime = 99999
angle = random%360

[State 0, ChangeState]
type = ChangeState
trigger1 = time>450
value = ifelse(pos y<0,51,0)
ctrl = ifelse(pos y<0,0,1)

